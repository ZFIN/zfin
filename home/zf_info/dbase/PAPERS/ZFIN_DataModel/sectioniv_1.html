<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>
			The Zebrafish Database Data Object: ID MANAGER
		</title>
	</head>

<script language="JavaScript" src="/javascript/header.js"></script>

<CENTER><H4>Data Descriptions for The Zebrafish Database (ZDB)</H4>
</CENTER>
<H2>SECTION IV:  Behind the Scenes</H2>
<H3>Data Object: ID MANAGER</H3>
<hr>
Return to the <A HREF="data_model.html"> Table of Contents</a>
<hr>

<P>	<B>Purpose:</B>  Each data record contained in the database must have a unique ID number. Initially, we intended to use the system-assigned Object ID (OID) for this purpose; because the system assigns these numbers automatically, it makes sense to take advantage of this feature for our own purposes.
			
<P>			However, insights from discussions with the Mouse DB people have revealed the folly of this approach. In case of a system crash or reorganization, much of our data could be scrambled. For example, suppose one were to export the data records to a newly installed copy of the database, or to a mirror site running Illustra. In this case, the OIDs assigned by the system might be &ldquo;reset&rdquo; starting from scratch. As a result, the OIDs used to identify records would no longer be necessarily unique, resulting in a disastrous scrambling of data. 
			
<P>			Consequently, it is necessary to generate and manage our own unique record ID numbers. This is the job of the ID MANAGER. Specifically, the ID MANAGER returns a new unique ID value upon request, dynamically generating them based on the argument passed in.  The format proposed here is based on the idea of incorporating the current date into each ID generated. This has the advantage that no two IDs are identical. 
	
<P>	<B>NOTE:</B> we have not yet worked out the details of this object. The following description is in flux and may be incomplete.
	
<H4>METHODS:</H4>
<P>	<B>get_id(Object_type):</B>  This is the sole externally visible method for the ID MANAGER, which is called to generate a new ID number.  The argument Object_Type specifies the type of record for which you are requesting an ID; this is used to generate the appropriate ID. Return value is a text string formatted as follows:
			<CENTER><H3>ZDBN-OT-YRMODY-ID#</H3></CENTER>
<P>The fields of this string are:
<P>			<B>ZDBN: </B>The &ldquo;ZDB&rdquo; is a literal prefix that appears first in every ID. The purpose is to distinguish our IDs from the accession numbers of other databases. The &ldquo;N&rdquo; is a way to accommodate future expansion to several ZFIN servers, all incorporating data simultaneously. By identifying each server with a unique 1-digit ID number, we can ensure that all IDs in the overall dataset remain unique.
<P>			<B>OTP: </B>This three character field specifies the record type of the data record identified by the ID. For example, the record type for a Gene record is GEN; the record type for a publication is PUB.
<P>			<B>YR: </B>The last two digits of the current year.
<P>			<B>MO:</B> Two digits specifying number of the current month (e.g. May = 05)
<P>			<B>DY:</B> Two digits specifying the current day of the month.
<P>			<B>ID#:</B> Arbitrary number of digits uniquely identifying the record. This value is incremented each time an ID for a given record type is specified. It is reset to one each day. 
<BR>
<BR>
<BR>
	<H4>EXAMPLES: </H4>
<H4>Suppose the current date is Feb. 14, 1996.</H4>
<TABLE CELLSPACING=15><TR><TD></TD><TD>get_id(GENE) -->  ZDB1-GEN-960214-1</TD></TR>
<TR><TD></TD><TD>get_id(GENE) -->  ZDB1-GEN-960214-2</TD></TR>
<TR><TD></TD><TD>get_id(GENE) -->  ZDB1-GEN-960214-3</TD></TR>
<TR><TD></TD><TD>get_id(PUBLICATION) -->  ZDB-PUB-960214-1</TD></TR></TABLE>
<H4>Now suppose the date has changed to Feb. 15, 1996.</H4>
<TABLE CELLSPACING=15><TR><TD></TD><TD>get_id(GENE) -->  ZDB1-GEN-960215-1</TD></TR>
<TR><TD></TD><TD>get_id(PUBLICATION) -->  ZDB1-GEN-960215-1</TD></TR></TABLE>
<BR>
<H4>STATE:  </H4>
<P>	The ID MANAGER must maintain the current ID# for each type of record, incrementing this number each time a request for a new ID for that record type is processed. It must also reset this value to one, each time a day boundary has passed since the last time an ID was requested. The date of the last request for each record type is stored; if the date of a subsequent request falls on a new day, the counter for that record is reset to one.]
	
<H3>Open Issues/Questions:</H3>
<BR>
<BR>
<BR>
<hr>
<B>Data Descriptions for The Zebrafish Database (ZDB)</B><br>

Go to <A HREF="sectioniv_2.html"> next section</a><br>
Return to the <A HREF="data_model.html"> Table of Contents</a>

</BODY>

<script language="JavaScript" src="/javascript/footer.js"></script>
