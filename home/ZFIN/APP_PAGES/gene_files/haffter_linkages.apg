<HTML>

<basefont size=2>
<h1 align=center> Marker viewer </h1>

<?MISQL SQL="select WebExplode(object,'permission=root') from webPages where ID='aa-secure_navigation.apg';">$1<?/MISQL>


<?MIBLOCK COND="$(NC,$AUTHORIZED,false)">

<?MIVAR COND="$(NXST,$mtype)" NAME=$mtype>all<?/MIVAR>
<form name=inputer method=post action="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->">
<input type=hidden name=MIval value=aa-haffter_linkages.apg>
<b>Marker name contains:</b>
<?MIVAR>
<input name=mname type=text size=10 VALUE="$(IF,$(XST,$mname),$mname)">
<b>Type:</b>
<SELECT NAME=mtype>
<option value="all" $(IF,$(EC,$mtype,all),SELECTED)>Any
<option value="LOCUS" $(IF,$(EC,$mtype,LOCUS),SELECTED)>Mutant
<option value="GENE" $(IF,$(EC,$mtype,GENE),SELECTED)>Gene
</SELECT>
<?/MIVAR>

<input type=submit name=doit value="Search linkages">
</form>

<?MIVAR NAME=$constraint><?/MIVAR>

<?MIBLOCK COND="$(XST,$doit)">
<hr>

<?MIBLOCK COND="$(OR,$(XST,$mname),$(NC,$mtype,all))">
<?MIVAR COND="$(XST,$mname)" NAME=$constraint> and (lower(a.mname) like '%$(LOWER,$mname)%')<?/MIVAR>
<?MIVAR COND="$(NC,$mtype,all)" NAME=$constraint> $constraint and (a.zdb_id like 'ZDB-$mtype%')<?/MIVAR>
<?/MIBLOCK>

<h2>RESULTS: Known linkages</h2>
where from_marker meets above criteria
<p>
<TABLE cols=3>
<TH>from_marker</th><TH>to_marker</TH><TH>Distance</TH>

<?MISQL SQL="select a.mname,a.mtype,dist,LOD,c.mname,c.mtype from all_markers a,total_links_copy b,all_markers c where a.zdb_id=from_id and c.zdb_id=to_id $constraint order by a.mname;">
<TR>
<TD><B>$1</b> <font size=-1>($2)</font></TD>
<TD><B>$5</b><font size=-1> ($6)</font></TD>
<TD><B>$3</b> <font size=-1>(LOD=$4)</font></TD>
</TR>
<?/MISQL>
</TABLE>

<!-- <?MIVAR>SQL=$MI_SQL<?/MIVAR> -->

<?MIVAR><p>Total of $MI_ROWCOUNT matches found.<?/MIVAR>
<?/MIBLOCK>

<?/MIBLOCK> <!-- ends authorized -->
</HTML>