<HTML>

<HEAD>
<SCRIPT>
function radioupdate(flag) {
  document.getcrits.period[flag].checked=true;
  if (flag==0){
    document.getcrits.smonth.value="";
    document.getcrits.syear.value="";
    document.getcrits.emonth.value="";
    document.getcrits.eyear.value="";
  }
}

function validate(field,type) {
  document.getcrits.period[1].checked=true;
  var num_input=parseInt(field.value);
  if (isNaN(num_input)) {
    window.alert('You must enter an integer for this field');
    field.value="";
    field.focus();
  } else {
    if (type=='year'&&(num_input<1990 || num_input>2050)) {
      window.alert('Not a valid year.\nMust fall between 1990 and 2050.\nTry again.');
        field.value="";
        field.focus()
    }
    if (type=='month') {
      if (num_input<1 || num_input>12) {
        window.alert('Not a valid month. Must be 01-12. \nTry again.');
        field.value="";
        field.focus()
      }
      if (field.value.length==1) {
        field.value="0"+field.value
      }
    }
  }
}

</SCRIPT>

<?MISQL SQL="select WebExplode(object,'page_title=Examine Updates') from webPages where ID='aa-secure_navigation.apg';">$1<?/MISQL>

<basefont size=2>

<form name=getcrits method=post TARGET="updates" action="/cgi-bin_B/webdriver">

<TABLE width=100%>
<TR><TD colspan=2 align=center>
<?MIVAR><Big>Updates to record $OID</big><?/MIVAR>
</TD></TR>
<TR><TD align=center>
<B><font color="#ff0000">Display<br>
 Criteria:</font></B>
</TD>
<TD> Updates to 
<select name=field>
<option selected>ANY
<?MISQL SQL="execute function inf_tcols('$rtype');">
$(IF,$(NC,$1,zdb_id),<option>$1)
<?/MISQL>
</SELECT>
 field of this record that:</TD>
</TR>
<TR>
<TD align=center>
<input type=submit name=action value="Do it!">
</TD><TD> 
<input type=radio name=period value=open CHECKED onClick="radioupdate(0)"> have <b>ever</b> been submitted. <br>
<input type=radio name=period value=dated onClick="radioupdate(1)"> 
were submitted between (month) 
<input type=text size=2 name=smonth onChange="validate(this,'month')"> of (year) <input type=text size=4 name=syear onChange="validate(this,'year')"> AND 
<input type=text size=2 name=emonth onChange="validate(this,'month')"> of <input type=text size=4 name=eyear onChange="validate(this,'year')">.
</TD>
</TR>
</TABLE>
<input type=hidden name=MIval value=aa-update-lister.apg>
<?MIVAR>
<input type=hidden name=OID value=$OID>
<input type=hidden name=rtype value=$rtype>
<?/MIVAR>
</form>


</HTML>

