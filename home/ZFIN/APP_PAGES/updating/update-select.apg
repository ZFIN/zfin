<!-- Modified to support I.E.  Naviagtor tile buttons must know all user input from the query screen.  These values are posted to the lister form.  The lister form creates the tile bar button with appropriate variables. Startframes.apg, which is call by the nav tile button, will pass this variables on to the select form.  -->


<HTML>

<HEAD>
<SCRIPT>
function radioupdate(flag) {
  document.getcrits.period[flag].checked=true;
  if (flag==0){
    document.getcrits.smonth.value="";
    document.getcrits.syear.value="";
    document.getcrits.emonth.value="";
    document.getcrits.eyear.value="";
  }
}

function validate(field,type) {
  document.getcrits.period[1].checked=true;
  var num_input=parseInt(field.value);
  if (isNaN(num_input)) {
    window.alert('You must enter an integer for this field');
    field.value="";
    field.focus();
  } else {
    if (type=='year'&&(num_input<1990 || num_input>2050)) {
      window.alert('Not a valid year.\nMust fall between 1990 and 2050.\nTry again.');
        field.value="";
        field.focus()
    }
    if (type=='month') {
      if (num_input<1 || num_input>12) {
        window.alert('Not a valid month. Must be 01-12. \nTry again.');
        field.value="";
        field.focus()
      }
      if (field.value.length==1) {
        field.value="0"+field.value
      }
    }
  }
}


function form_submit() {
document.getcrits.submit();
}


</SCRIPT>


<basefont size=2>

<form name=getcrits method=post TARGET="updates" action="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->">

<TABLE width=100%>
<TR><TD colspan=2 align=center>
<?MIVAR><Big>Updates to record $OID</big><?/MIVAR>
</TD></TR>
<TR><TD align=center>
<B><font color="#ff0000">Display<br>
 Criteria:</font></B>
</TD>
<TD> Updates to 
<select name=field>
<option $(IF,$(EC,$field,any),SELECTED) value=any>ANY
<option $(IF,$(EC,$field,zdb_id),SELECTED) value=zdb_id>zdb_id
<option $(IF,$(EC,$field,gene_name),SELECTED) value=gene_name>gene_name
<option $(IF,$(EC,$field,comments),SELECTED) value=comments>comments
<option $(IF,$(EC,$field,abbrev),SELECTED) value=abbrev>abbrev
<option $(IF,$(EC,$field,owner),SELECTED) value=owner>owner
</SELECT>
 field of this record that:</TD>
</TR>
<TR>
<TD align=center>
<input type=submit name=doit value="Do it!">
</TD><TD> 
<input type=radio name=period value=open CHECKED onClick="radioupdate(0)"> have <b>ever</b> been submitted. <br>
<input type=radio name=period value=dated onClick="radioupdate(1)"> 
were submitted between (month) 
<?MIBLOCK COND="$(AND,$(XST,$period),$(EC,$period,open))"> 
  <SCRIPT>
    <?MIVAR> 
    document.getcrits.period[0].checked=true;  
    <?/MIVAR> 
  </SCRIPT> 
<?/MIBLOCK>

<?MIBLOCK COND="$(AND,$(XST,$period),$(EC,$period,dated))"> 
  <SCRIPT>
    <?MIVAR> 
    document.getcrits.period[1].checked=true;  
    <?/MIVAR> 
  </SCRIPT> 
<?/MIBLOCK>
<input type=text size=2 name=smonth onChange="validate(this,'month')"> of (year) <input type=text size=4 name=syear onChange="validate(this,'year')"> AND 
<input type=text size=2 name=emonth onChange="validate(this,'month')"> of <input type=text size=4 name=eyear onChange="validate(this,'year')">.
<?MIBLOCK COND="$(XST,$emonth)"> 
  <SCRIPT>
    <?MIVAR> 
      document.getcrits.emonth.value = "$emonth"
    <?/MIVAR> 
  </SCRIPT> 
<?/MIBLOCK>
<?MIBLOCK COND="$(XST,$smonth)"> 
  <SCRIPT>
    <?MIVAR> 
      document.getcrits.smonth.value = "$smonth"
    <?/MIVAR> 
  </SCRIPT> 
<?/MIBLOCK>
<?MIBLOCK COND="$(XST,$eyear)"> 
  <SCRIPT>
    <?MIVAR> 
      document.getcrits.eyear.value = "$eyear"
    <?/MIVAR> 
  </SCRIPT> 
<?/MIBLOCK>
<?MIBLOCK COND="$(XST,$syear)"> 
  <SCRIPT>
    <?MIVAR> 
      document.getcrits.syear.value = "$syear"
    <?/MIVAR> 
  </SCRIPT> 
<?/MIBLOCK>
</TD>
</TR>
</TABLE>

<input type=hidden name=MIval value=aa-update-lister.apg>
<?MIVAR>
<input type=hidden name=OID value=$OID>
<input type=hidden name=rtype value=$rtype>
<?/MIVAR>

<!-- If we have gotten to this page from a nav bar tile - we need to autosubmit to get
 pbrowser frame populated -->


<?MIVAR COND="$(XST,$navtile)">
<SCRIPT>
form_submit();
</SCRIPT>
<?/MIVAR>


</form>


</HTML>

