
<html>
  <head>


<?MIVAR Name=page_name>ZFIN Postload Report)<?/MIVAR>

<?MIVAR><TITLE>$page_name</TITLE><?/MIVAR>

<?MIVAR NAME=$userid>GUEST<?/MIVAR>

<?MIVAR COND="$(NXST,$day)" NAME=$day>01<?/MIVAR>
<?MIVAR COND="$(NXST,$month)" NAME=$month>01<?/MIVAR>
<?MIVAR COND="$(NXST,$year)" NAME=$year>01<?/MIVAR>
<?MIVAR COND="$(NXST,$century)" NAME=$century>20<?/MIVAR>

  </head>

  <?MISQL SQL="select WebExplode(object,'') from webPages where ID='aa-htmlpageheader.apg';">$1<?/MISQL>

<SCRIPT>

function form_submit() {
document.critform.submit();
}

function call_reset() {

document.critform.dat.selectedIndex = 1;
document.critform.month.selectedIndex = 1;
document.critform.year.selectedIndex = 1;
document.critform.century.selectedIndex = 1;

}

</SCRIPT>

<?MISQL SQL="select WebExplode(object,'') from webPages where ID='aa-identify.apg';">$1<?/MISQL>



<?MIBLOCK COND="$(XST,$query_results)">


<!-- THIS NEXT PART IS EXECUTED AFTER THE PERSON ENTERS SOME CRITERIA -->
<?MIVAR NAME=$constraint COND="$(NXST,$constraint)"> <?/MIVAR>



<form method=post action="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->">

<!-- to be used by walking windows  -->
<!-- want GET string as short as possible - append only when variable exists, buffer overflow may cause segmentation fault -->
<!-- UserInput is used by walking windows to move through the data set -->
<!-- SearchInput remembers the search that was used to get here - need this infor to return to the correct search page from process-pub -->

<!-- this is all needed to support I.E., the history button and frames are not compatible so we must save variables and pass them around also history.go is not implemented the same in I.E. and Netscape  --> 

<!--- WALKING WINDOW --->
<!--- Initialization --->

<?MIVAR NAME=WINSIZE DEFAULT=25>$WINSIZE<?/MIVAR>
<?MIVAR NAME=BEGIN DEFAULT=1>$START<?/MIVAR>

<?MIVAR name=comment>  Build array of user data  <?/MIVAR>
<?MIVAR name=$selector>MIval=aa-pubselect2.apg&query_results=exists&WINSIZE=$WINSIZE<?/MIVAR>
<?MIVAR name=$UserInput><?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$authtype)>$UserInput&authtype=$authtype<?/MIVAR>	
<?MIVAR name=$UserInput COND=$(XST,$jtype)>$UserInput&jtype=$jtype<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$century)>$UserInput&century=$century<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$year)>$UserInput&year=$year<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$anon1)>$UserInput&anon1=$anon1<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$order_pref)>$UserInput&order_pref=$order_pref<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$pub_status)>$UserInput&pub_status=$pub_status<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$cur_status)>$UserInput&cur_status=$cur_status<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$return_rec)>$UserInput&return_rec=$return_rec<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$authors)>$UserInput&authors=$(URLENCODE,$authors)<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$title)>$UserInput&title=$(URLENCODE,$title)<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$yr_cmpr)>$UserInput&yr_cmpr=$(URLENCODE,$yr_cmpr)<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$anon1text)>$UserInput&anon1text=$(URLENCODE,$anon1text)<?/MIVAR>
<?MIVAR name=$UserInput COND=$(XST,$query_results)>$UserInput&query_results=$(URLENCODE,$query_results)<?/MIVAR>

</td></tr></table>  <!-- close table started in header to create a left margin, not allowing the buttons below to display properly -->

<TABLE width=100%>
	<TR>
		<TD align=center>
			<input type=submit name=printable value="Format into a printable listing">  
			<input type=submit name=refer value="Output as REFER format file">  
			<A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?MIval=aa-REFERinfo.apg">REFER&nbsp;Instructions</A>

<?MIVAR COND="$(EC,$AUTHORIZED,root)">

  <input type=button name=printable value="Add new Pub" onClick="window.location.replace('/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?MIval=aa-edit_pub.apg&rtype=publication$UserInput');">  
<?/MIVAR>
		</TD> 
	</TR>
</TABLE>

<input type=hidden name=MIval value=aa-pubprintable.apg>
<?MIVAR COND="$(XST,$title)"> <input type=hidden name=title value="$title"><?/MIVAR>
<?MIVAR COND="$(XST,$authors)"> <input type=hidden name=authors value="$authors"><?/MIVAR>
<?MIVAR COND="$(XST,$anon1text)"> <input type=hidden name=anon1text value="$anon1text"><?/MIVAR>
<?MIVAR COND="$(XST,$anon1text)"> <input type=hidden name=anon1 value="$anon1"><?/MIVAR>
<?MIVAR COND="$(XST,$year)"> <input type=hidden name=year value="$year"><?/MIVAR>
<?MIVAR> <input type=hidden name=constraint value="$constraint"><?/MIVAR>
<?MIVAR COND="$(XST,$order_clause)"> <input type=hidden name=order_clause value="$order_clause"><?/MIVAR>

</form>

<hr width=90%>

<TABLE width=100% border=0>
  <TR>
    <TD width=20%>&nbsp;</TD>
    <TD align=center width=60%>
      <font size="+1">Publication Search Results   
      <!-- DEBUGGING <?MIVAR> CONSTRAINT=$constraint <?/MIVAR> -->
      <?MISQL SQL="select count(distinct zdb_id)::integer 
                   from $target_tables $constraint;">
      <?/MISQL> 
      <?MIVAR NAME=$num_recs>$1<?/MIVAR>
      <?MIVAR>
         (<b>$num_recs</b> records found) </b> 
      </font>
      <?/MIVAR>
    </TD>
    <TD width=20% align=center>
      <a href="#modify">Modify Search</a>
      
      <!-- Insert a form with one button. Label button Your Input Welcome -->
        <?MISQL SQL="select WebExplode(object,'') from webPages where ID='aa-input_button_generic.apg';">$1<?/MISQL>
    </TD>
  </TR>
</TABLE>

<table cellpadding=5 bgcolor=#FFFFFF width=100%><tr><td>  <!-   begin table to create left margin -->




</form>


<!-- NOW do slightly different displays, depending on whether you are selecting a value, or merely browsing. 
-->


<!--- WALKING WINDOW --->

<!--- DEFINITION OF RANGES --->
<?MIVAR NAME=BEGIN>$(IF,$(<,$BEGIN,1),1,$BEGIN)<?/MIVAR> 
<?MIVAR NAME=END>$(+,$BEGIN,$WINSIZE)<?/MIVAR>
<?MIVAR NAME=$rowNUM>$BEGIN<?/MIVAR>


<!--- EXECUTION --->
<!--- Query Database --->
<?MISQL WINSTART=$BEGIN WINSIZE=$WINSIZE
	SQL="select distinct title,authors,zdb_id,year(pub_date) as pyear, source, lower(authors) from $target_tables $constraint $order_clause;">
<TR>
<?MIVAR><TD valign=top>&nbsp;</TD><?/MIVAR>
<TD valign=top> 

$(IF,$(AND,$(NXST,$return_rec),$(EC,$ZDB_access,root)),"<FONT ><!--SIZE=-1--> <A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?MIval=aa-edit_pub.apg&OID=$3$UserInput&START=$START">EDIT</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </FONT>")
$(IF,$(AND,$(NXST,$return_rec),$(EC,$ZDB_access,root)),"<FONT ><!--SIZE=-1--> <A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?MIval=aa-link_authors.apg&OID=$3$UserInput&START=$START">LINK</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </FONT>")

$(IF,$(XST,$return_rec),"<FONT ><!--SIZE=-1--><DIV class="show_pubs"> <A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?MIval=aa-do-select.apg&return_rec=$return_rec&new_oid=$3">SELECT</A>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</FONT>")
</TD></DIV>
<TD colspan=1 align=left><font size=3><DIV class="show_pubs"> <A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?MIval=aa-pubview2.apg&OID=$3">$2 ($4) $1. $5.</A></DIV></TD></TR>
<p>
		<?MIVAR name=$rowNUM>$(+,$rowNUM,1)<?/MIVAR>
<?/MISQL>

</Table>

<P>
<Center>
<Table width="70%" border="0" cellpadding=2>
	<tr>
		<td width="45%" align=right valign=top>&nbsp;



<!--- Return to the previous set of Rows --->
<?MIBLOCK COND="$(>,$BEGIN,1)">
	
<?MIVAR>
	<A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?START=$(-,$BEGIN,$WINSIZE)&BEGIN=$BEGIN&$selector$UserInput">Prev</A>&nbsp;&nbsp;&nbsp;&nbsp;<br>

<!-- If current not First Page, create link to first page. -->
	<A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?START=1&BEGIN=1&$selector$UserInput">First Page</A>
<?/MIVAR>

<?/MIBLOCK>

		</td>


<!-- Calculate 3 pages before and 3 pages after current page. -->
<?MIVAR name=$CURRENT>$(FIX,$(+,$(/,$BEGIN,$WINSIZE),1))<?/MIVAR>

<?MIBLOCK COND="$(>=,$(-,$BEGIN,$(*,$WINSIZE,3)),0)">
<td valign=top>
  <?MIVAR><A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?$selector$UserInput&START=$(-,$BEGIN,$(*,$WINSIZE,3))"> $(-,$CURRENT,3)</A> <?/MIVAR>
		</td>
<?/MIBLOCK>

<?MIBLOCK COND="$(>=,$(-,$BEGIN,$(*,$WINSIZE,2)),0)">
<td valign=top>
  <?MIVAR><A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?$selector$UserInput&START=$(-,$BEGIN,$(*,$WINSIZE,2))"> $(-,$CURRENT,2)</A><?/MIVAR>
		</td>
<?/MIBLOCK>

<?MIBLOCK COND="$(>=,$(-,$BEGIN,$(*,$WINSIZE,1)),0)">
<td valign=top>
  <?MIVAR><A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?$selector$UserInput&START=$(-,$BEGIN,$(*,$WINSIZE,1))"> $(-,$CURRENT,1)</A><?/MIVAR>
		</td>
<?/MIBLOCK>

<?MIBLOCK COND="$(>,$num_recs,$WINSIZE)">
<td align=center valign=top>
	<?MIVAR>  $CURRENT <?/MIVAR>
</td>
<?/MIBLOCK>

<?MIVAR COND=$(<=,$(+,$BEGIN,$(*,$WINSIZE,1)),$num_recs)>
<td valign=top>
<A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?$selector$UserInput&START=$END"> $(+,$CURRENT,1)</A>
		</td>
<?/MIVAR>

<?MIVAR COND=$(<=,$(+,$BEGIN,$(*,$WINSIZE,2)),$num_recs)>
<td valign=top>
<A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?$selector$UserInput&START=$(+,$BEGIN,$(*,$WINSIZE,2))"> $(+,$CURRENT,2)</A>
		</td>
<?/MIVAR>

<?MIVAR COND=$(<=,$(+,$BEGIN,$(*,$WINSIZE,3)),$num_recs)>
<td valign=top>
<A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?$selector$UserInput&START=$(+,$BEGIN,$(*,$WINSIZE,3))"> $(+,$CURRENT,3)</A>
		</td>
<?/MIVAR>

		<td width="45%" align=left valign=top>&nbsp;

<!--- Get the next set of Rows --->
<?MIBLOCK COND="$(<=,$(+,$BEGIN,$WINSIZE),$num_recs)">
<?MIVAR>
	<A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?START=$END&BEGIN=$BEGIN&$selector$UserInput">Next</A><br>
<?/MIVAR>


<!-- Calculate last page -->
<?MIVAR name=$START COND="$(=,$(MOD,$num_recs,$WINSIZE),0)">
	$(+,$(*,$(-,$(/,$num_recs,$WINSIZE),1),$WINSIZE),1)
<?/MIVAR>

<?MIVAR name=$START COND="$(!=,$(MOD,$num_recs,$WINSIZE),0)">
	$(+,$(*,$(FIX,$(/,$num_recs,$WINSIZE)),$WINSIZE),1)
<?/MIVAR>

<?MIVAR>
	<A HREF="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?START=$START&$selector$UserInput">Last Page</A>
<?/MIVAR>
<?/MIBLOCK>
		</td>
	</tr>
</Table>
</Center>

<?/MIBLOCK> <!-- xst query_results -->




<Table class=search width="100%" border=0 cellpadding=1 cellspacing=0>
  <TR>
    <td class=titlebar>
      &nbsp;&nbsp;

  <?MIBLOCK COND="$(NXST,$query_results)">
	  <b>Search for LoadReport</b>
  <?MIELSE>
          <a name=modify></a><b>Modify your search</b>
  <?/MIBLOCK>

        </td>
        <td class=titlebar align=right>
        <?MISQL SQL="select WebExplode(object,'') from webPages where ID='aa-input_button_generic.apg';">$1<?/MISQL>          
        </td>
      </tr>

  <form name=critform 
	method=post 
	action="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->">

    <TR>

  <?MISQL COND="$(NXST,$query_results)
          SQL="select DAY(TODAY),MONTH(TODAY),YEAR(TODAY)
               FROM anatomy_item
               where anatitem_name = 'yolk';>
          <?MIVAR NAME=$day>$1<?/MIVAR>
          <?MIVAR NAME=$month>$2<?/MIVAR>
          <?MIVAR NAME=$year>$(SUBSTRING,$3,1,2)<?/MIVAR>
          <?MIVAR NAME=$century>$(SUBSTRING,$3,3,4)<?/MIVAR>
  <?/MISQL>
  <?MIVAR>
      <TD class=halfwidth>
	<b>DATE</b> Day: 
	<SELECT name=day onChange='document.critform.START.value = "";'>
	<option  $(IF,$(EC,$day,1),SELECTED) value=01>01 
	<option  $(IF,$(EC,$day,2),SELECTED) value=02>02 
	<option  $(IF,$(EC,$day,3),SELECTED) value=03>03
	<option  $(IF,$(EC,$day,4),SELECTED) value=04>04 
	<option  $(IF,$(EC,$day,5),SELECTED) value=05>05 
	<option  $(IF,$(EC,$day,6),SELECTED) value=06>06 
	<option  $(IF,$(EC,$day,7),SELECTED) value=07>07 
	<option  $(IF,$(EC,$day,8),SELECTED) value=08>08 
	<option  $(IF,$(EC,$day,9),SELECTED) value=09>09 
	<option  $(IF,$(EC,$day,10),SELECTED) value=10>10 
	<option  $(IF,$(EC,$day,11),SELECTED) value=11>11 
	<option  $(IF,$(EC,$day,12),SELECTED) value=12>12 
	<option  $(IF,$(EC,$day,13),SELECTED) value=13>13 
	<option  $(IF,$(EC,$day,14),SELECTED) value=14>14 
	<option  $(IF,$(EC,$day,15),SELECTED) value=15>15 
	<option  $(IF,$(EC,$day,16),SELECTED) value=16>16 
	<option  $(IF,$(EC,$day,17),SELECTED) value=17>17 
	<option  $(IF,$(EC,$day,18),SELECTED) value=18>18 
	<option  $(IF,$(EC,$day,19),SELECTED) value=19>19 
	<option  $(IF,$(EC,$day,20),SELECTED) value=20>20 
	<option  $(IF,$(EC,$day,21),SELECTED) value=21>21 
	<option  $(IF,$(EC,$day,22),SELECTED) value=22>22 
	<option  $(IF,$(EC,$day,23),SELECTED) value=23>23 
	<option  $(IF,$(EC,$day,24),SELECTED) value=24>24 
	<option  $(IF,$(EC,$day,25),SELECTED) value=25>25 
	<option  $(IF,$(EC,$day,26),SELECTED) value=26>26 
	<option  $(IF,$(EC,$day,27),SELECTED) value=27>27 
	<option  $(IF,$(EC,$day,28),SELECTED) value=28>28 
	<option  $(IF,$(EC,$day,29),SELECTED) value=29>29 
	<option  $(IF,$(EC,$day,30),SELECTED) value=30>30 
	<option  $(IF,$(EC,$day,31),SELECTED) value=31>31 
	</SELECT>
	<SELECT name=month onChange='document.critform.START.value = "";'>
	<option  $(IF,$(EC,$month,1),SELECTED) value=01>01 
	<option  $(IF,$(EC,$month,2),SELECTED) value=02>02 
	<option  $(IF,$(EC,$month,3),SELECTED) value=03>03
	<option  $(IF,$(EC,$month,4),SELECTED) value=04>04 
	<option  $(IF,$(EC,$month,5),SELECTED) value=05>05 
	<option  $(IF,$(EC,$month,6),SELECTED) value=06>06 
	<option  $(IF,$(EC,$month,7),SELECTED) value=07>07 
	<option  $(IF,$(EC,$month,8),SELECTED) value=08>08 
	<option  $(IF,$(EC,$month,9),SELECTED) value=09>09 
	<option  $(IF,$(EC,$month,10),SELECTED) value=10>10 
	<option  $(IF,$(EC,$month,11),SELECTED) value=11>11 
	<option  $(IF,$(EC,$month,12),SELECTED) value=12>12 
	</SELECT>
	<SELECT name=century onChange='document.critform.START.value = "";'>
	<option  $(IF,$(EC,$century,19),SELECTED) value=19>19 
	<option  $(IF,$(EC,$century,20),SELECTED) value=20>20
	<option  $(IF,$(EC,$century,18),SELECTED) value=18>18 
	</SELECT>
	<SELECT name=year onChange='document.critform.START.value = "";'>
	<option  $(IF,$(EC,$year,00),SELECTED) value=00>00 
	<option  $(IF,$(EC,$year,01),SELECTED) value=01>01
	<option  $(IF,$(EC,$year,02),SELECTED) value=02>02 
	</SELECT>
      </TD>
  <?/MIVAR> 
      <TD>&nbsp;&nbsp;</TD>
    </tr>
    

    <tr>
      <td class=submitbar colspan=2 align="right">
	<input type=submit name=action value="SEARCH" onSubmit="document.critform.submit();"> 
	<input type=button name=action value="RESET" onClick="call_reset()"> 

      </td>
    </tr>
  </table>

  <input type=hidden NAME="query_results" value="exist">
  <input type=hidden name=MIval value=aa-postload.apg>

  </form>

<?MIBLOCK COND="$(XST,$query_results)">
    </TD>
  </TR>
</TABLE>
<?MIELSE>
  <!-- Put the cursor in the DAY criterion box -->
  <SCRIPT>document.critform.day.focus();</SCRIPT>
<?/MIBLOCK>


  <?MISQL SQL="select WebExplode(object,'') from webPages where ID='aa-htmlpagefooter.apg';">$1<?/MISQL>
