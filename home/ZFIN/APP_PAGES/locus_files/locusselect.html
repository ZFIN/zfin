
<HTML>

<HEAD>

<TITLE>ZFIN Locus Registration Request</TITLE>

<SCRIPT>

function form_submit() {
document.ldata.submit();
}

function show_doc(docpath) {
   top.zfinhelp=open("/<!--|WEBDRIVER_PATH_FROM_ROOT|-->?MIval=aa-docframes.apg&docpath="+docpath,"helpwindow","scrollbars=yes,width=600,height=600");
  top.zfinhelp.focus();
}

function check_submission(doAction,authorization) {
 var acceptable=1;
 var myform=document.ldata;
 var prefix='';

if (authorization != 'root'){
 if ((myform.fname.value == '') || (myform.allele.value == '') || ((myform.abbrev.value == '') && (myform.fname.value.substr (0,2) != "Df") && (myform.fname.value.substr (0,2) != "Cr")&&( myform.fname.value.substr (0,2) != "In") && ( myform.fname.value.substr (0,2) != "Is") && ( myform.fname.value.substr (0,1) != "T") && ( myform.fname.value.substr (0,2) != "Dp")))
 {
      acceptable=0;
      window.alert('Incomplete submission!\n You must specify all three values: Locus name, abbreviation and allele designation!');
 }

 if (( myform.fname.value.substr (0,2) == "Df")||(myform.fname.value.substr (0,2) == "Tg")||(myform.fname.value.substr (0,2) == "Cr")||(myform.fname.value.substr (0,2) == "Dp")||(myform.fname.value.substr (0,2) == "In")||(myform.fname.value.substr (0,2) == "Is")||(myform.fname.value.substr (0,1) == "T")){
  var glob=myform.abbrev.value+myform.allele.value;
 } else {
    var glob=myform.fname.value+myform.abbrev.value+myform.allele.value;
 }
 if(glob != glob.toLowerCase() ){
  acceptable=0;
  window.alert('Nomenclature violation: Capitalization.\n Locus Name, Abbreviation and allele may not contain any upper case letters! \n Please correct and try again.');
 }
 var allele=myform.allele.value;
 var starter=0;
 if (allele.charAt(0)=='d') {starter=1}

 if (isNaN(parseInt(allele.charAt(starter+2)),10)) {   // a three letter prefix
    prefix=allele.substring(starter,starter+3);
    suffix=allele.substring(starter+3);
 } else {  
  if (isNaN(parseInt(allele.charAt(starter+1)),10)) {   // a two letter prefix
    prefix=allele.substring(starter,starter+2);
    suffix=allele.substring(starter+2);} 
  else {  
  if (isNaN(parseInt(allele.charAt(starter)),10)) {   // a one letter prefix
    prefix=allele.charAt(starter);
    if(!isNaN(parseInt(prefix))) {prefix='d'};
    suffix=allele.substring(starter+1);
 }}}

 if(isNaN(parseInt(suffix.charAt(0)),10)) {
    acceptable=0;
    window.alert('Nomenclature Violation: Malformed Allele '+allele+'. \nAllele designations must begin with 1-3 letters, followed by a number. \nIn addition leading "d" is allowed to denote dominant alleles. \n Please review nomenclature guidelines and retry your submission.');
 }
}
 if (acceptable) { 
    myform.doAction.value=doAction;
    myform.prefix.value=prefix;
    myform.submit(); 
 }
}

</SCRIPT>

<?MISQL SQL="select WebExplode(object,'') from webPages where ID='aa-htmlpageheader.apg';">$1<?/MISQL>

<form name=ldata  method=post  action="/<!--|WEBDRIVER_PATH_FROM_ROOT|-->">

<center>
<FONT SIZE=3 color="#ff0000" > <B>REGISTER Locus and/or Allele designations</B></font>
</center>
<p>
<big><b>Thank you</b></big> for taking the time to register your locus and allele designation.  If you have not yet published information about this mutant, the name you request will be reserved in your name for 6 months; please <a href="javascript:show_doc('/ZFIN/help_files/Locus-policy.html')"> review the ZFIN locus registration policy</a> for details.
<p>
<big> Please enter information on the locus name, abbreviation and allele designation you would like to reserve:</big>
<TABLE width=100%>
<TR>
<TD><font size=-1><b>Locus name:</b> <input type=text  name=fname size=30 ></font></TD> 
<TD><font size=-1><b>Abbreviation:</b> <input type=text maxlength=20  name=abbrev size=6 ></font></TD>
<TD><font size=-1><b>Allele:</b> <input type=text maxlength=10   name=allele size=5 ></font></TD>


</TR>
</TABLE>



<TABLE width=100%>
<TR><TD colspan=2><font size=-1>Please <A HREF="javascript:show_doc('/zf_info/zfbook/chapt7/7.1.html');">review nomenclature guidelines</A> carefully before submitting!</font></TD></TR>
<TR>
<TD><font size=-1>
<?MIVAR><input type=button name=new_locus onClick="check_submission('new_locus','$AUTHORIZED');" value="Submit as new locus and allele"><?/MIVAR>
</font></TD>
<TD><font size=-1>
<?MIVAR><input type=button onClick="check_submission('new_allele','$AUTHORIZED');" name=new_allele value="Submit as new allele of existing locus"></font><?/MIVAR>
</TD>
<TD><font size=-1>
<input type=button name=new_allele value="Help!" onClick="show_doc('/ZFIN/help_files/locus_intro.html')"></font>
</TD>
</TR>
</TABLE>

<input type=hidden name=MIval value=aa-locuslister.apg>
<input type=hidden name=doAction value="">
<input type=hidden name=prefix value="">



</form>

<?MISQL SQL="select WebExplode(object,'') from webPages where ID='aa-htmlpagefooter.apg';">$1<?/MISQL>

</HTML>

