<table class="primary-entity-attribute">
    <tr>
        <th>Import from NCBI</th>
        <td>
            <form class="curation-form curation-inline">
                <input type="text" ng-model="vm.ncbiGeneNumber" ng-change="vm.ncbiError = ''">
                <button class="zfin-button" ng-click="vm.addOrtholog()">Import</button>
                <div class="error" ng-show="vm.ncbiError">{{vm.ncbiError}}</div>
            </form>
        </td>
    </tr>
</table>

<button ng-click="vm.addEvidence({})">modal</button>

<hr>

<table class="summary basicstripes">
    <thead>
    <tr>
        <th></th>
        <th>Species</th>
        <th>Symbol</th>
        <th>Location</th>
        <th>Accession</th>
        <th>Evidence</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-show="vm.orthologs.length == 0">
        <td class="no-data" colspan="6">No Orthologs Yet</td>
    </tr>
    <tr ng-repeat="ortholog in vm.orthologs">
        <td><a href="#" ng-click="vm.confirmDeleteOrtholog(ortholog)">Delete</a></td>
        <td>{{ortholog.species}}</td>
        <td><i>{{ortholog.symbol}}</i></td>
        <td>{{ortholog.location}}</td>
        <td>
            <div ng-repeat="accession in ortholog.accessions">
                <a ng-href="{{accession.url}}">{{accession.display}}</a>
            </div>
        </td>
        <td>
            <div ng-repeat="ev in ortholog.evidence">
                <a href="#">{{ev.publication}}</a>: {{vm.formatCodes(ev.codes)}} &mdash;
                <a href="#" ng-click="vm.editEvidence(ortholog, ev, $index)">Edit</a>
                <a href="#" ng-click="vm.deleteEvidence(ortholog, ev, $index)">Delete</a>
            </div>
            <a href="#" ng-click="vm.addEvidence(ortholog)">Add</a>
        </td>
    </tr>
</table>

<h3>Orthology Note</h3>
<div class="curation-form">
    <div ng-click="vm.editNote()" ng-hide="vm.noteEditing" class="inline-edit" title="Click to edit">
        <div ng-show="vm.note.note" class="keep-breaks">{{vm.note.note}}</div>
        <div ng-hide="vm.note.note" class="muted">Click to add</div>
    </div>
    <div ng-show="vm.noteEditing">
        <textarea ng-model="vm.noteText" rows="5"></textarea>
        <button ng-click="vm.saveNoteEdit()" class="zfin-button approve">Save</button>
        <button ng-click="vm.cancelNoteEdit()" class="zfin-button cancel">Cancel</button>
    </div>
</div>

<div id="evidence-modal" class="jq-modal curation">
    <h3>Evidence for {{vm.modalOrtholog.species}} <i>{{vm.modalOrtholog.symbol}}</i> ortholog</h3>
    <div class="curation-form">
        <label>Publication</label>
        <div class="list-select">
            <input type="text"
                   class="list-select-text"
                   ng-model="vm.modalEvidence.publication"
                   ng-disabled="vm.modalEvidenceIndex > -1"
                   ng-change="vm.evidencePublicationError = ''">
            <ul class="list-select-options">
                <li ng-click="vm.modalEvidence.publication = 'Ortho Curation Pub'">Ortho Curation Pub</li>
                <li ng-click="vm.modalEvidence.publication = 'ZDB-PUB-XXXXXX-X'">ZDB-PUB-XXXXXX-X</li>
                <li ng-click="vm.modalEvidence.publication = 'ZDB-PUB-YYYYYY-Y'">ZDB-PUB-YYYYYY-Y</li>
                <li ng-click="vm.modalEvidence.publication = 'ZDB-PUB-ZZZZZZ-Z'">ZDB-PUB-ZZZZZZ-Z</li>
            </ul>
        </div>
        <div class="error" ng-show="vm.evidencePublicationError">{{vm.evidencePublicationError}}</div>
        <label>Evidence Codes</label>
        <div class="list-select keep-open">
            <input class="list-select-text" ng-value="vm.formatCodes(vm.modalEvidence.codes)" readonly>
            <ul class="list-select-options">
                <li ng-repeat="code in vm.modalEvidence.codes">
                    <label>
                        <input type="checkbox" ng-model="code.selected" ng-change="vm.evidenceCodeError = ''">
                        {{code.full}} ({{code.abbrev}})
                    </label>
                </li>
            </ul>
        </div>
        <div class="error" ng-show="vm.evidenceCodeError">{{vm.evidenceCodeError}}</div>
        <div class="popup-actions">
            <button class="zfin-button cancel" ng-click="vm.cancelEvidence()">Cancel</button>
            <button class="zfin-button approve" ng-click="vm.saveEvidence()">Save</button>
        </div>
    </div>
</div>

<div id="delete-modal" class="jq-modal curation">
    <h3>Delete {{vm.modalOrtholog.species}} <i>{{vm.modalOrtholog.symbol}}</i> ortholog?</h3>
    <div class="popup-actions">
        <button class="zfin-button cancel" ng-click="vm.cancelDelete()">Cancel</button>
        <button class="zfin-button reject" ng-click="vm.deleteOrtholog()">Delete</button>
    </div>
</div>
