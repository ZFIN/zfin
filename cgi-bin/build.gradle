defaultTasks 'make'

task make(type: GradleBuild) {
    tasks = ['deployDirectoryToTargetroot']
}

task deployDirectoryToTargetroot(type: Copy) {
    doLast {
        def dataDirectory = ''
        dataDirectory += projectDir
        println "Copying files from directory: " + dataDirectory
        from(dataDirectory) {
            ttNameMap.each { name, value ->
                filter { it.replaceAll('<!--\\|' + name + '\\|-->', value) }
            }
            exclude '**/Makefile', '**/build.gradle'
        }
        into ttNameMap.get('TARGETROOT') + '/cgi-bin'
    }
}