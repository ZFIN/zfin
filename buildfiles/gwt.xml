<?xml version="1.0" encoding="UTF-8"?>
<project name="gwt" basedir=".">

    <target name="dirty-gwt" description="Compiles all gwt targets">
        <antcall target="dirty-lookup-gwt"/>
        <antcall target="dirty-marker-gwt"/>
        <antcall target="dirty-curation-gwt"/>
    </target>

    <target name="gwt" description="Compiles all gwt targets">
        <antcall target="lookup-gwt"/>
        <antcall target="marker-gwt"/>
        <antcall target="curation-gwt"/>
    </target>

    <target name="dirty-lookup-gwt" description="Compiles lookup gwt">
        <antcall target="gwt-compile">
            <param name="gwt.module.target" value="${gwt.target}"/>
            <param name="gwt.module" value="org.zfin.gwt.lookup.Lookup"/>
        </antcall>
    </target>

    <target name="lookup-gwt" description="Compiles lookup gwt">
        <antcall target="gwt-compile">
            <param name="gwt.module.target" value="${gwt.pre-target}"/>
            <param name="gwt.module" value="org.zfin.gwt.lookup.Lookup"/>
        </antcall>
    </target>

    <target name="curation-gwt" description="Compiles curation gwt">
        <antcall target="gwt-compile">
            <param name="gwt.module.target" value="${gwt.pre-target}"/>
            <param name="gwt.module" value="org.zfin.gwt.curation.Curation"/>
        </antcall>
    </target>

    <target name="dirty-curation-gwt" description="Compiles curation gwt">
        <antcall target="gwt-compile">
            <param name="gwt.module.target" value="${gwt.target}"/>
            <param name="gwt.module" value="org.zfin.gwt.curation.Curation"/>
        </antcall>
    </target>

    <target name="dirty-pato-curation-gwt" description="Compiles curation gwt">
        <antcall target="gwt-compile">
            <param name="gwt.module.target" value="${gwt.target}"/>
            <param name="gwt.module" value="org.zfin.gwt.curation.PatoCuration"/>
        </antcall>
    </target>

    <target name="marker-gwt" description="Compiles transcript edit gwt">
        <antcall target="gwt-compile">
            <param name="gwt.module.target" value="${gwt.pre-target}"/>
            <param name="gwt.module" value="org.zfin.gwt.marker.Marker"/>
        </antcall>
    </target>

    <target name="dirty-marker-gwt" description="Compiles transcript edit gwt">
        <antcall target="gwt-compile">
            <param name="gwt.module.target" value="${gwt.target}"/>
            <param name="gwt.module" value="org.zfin.gwt.marker.Marker"/>
        </antcall>
    </target>

    <target name="run-marker-gwt" description="Compiles transcript edit gwt">
        <antcall target="gwt-run">
            <param name="gwt.module.target" value="${gwt.target}"/>
            <param name="gwt.module" value="org.zfin.gwt.marker.Marker"/>
        </antcall>
    </target>

    <target name="gwt-run" description="Compile gwt classes to javascript" depends="compile">
        <java fork="true" className="com.google.gwt.dev.GWTShell" classpathref="extended.classpath">
            <classpath>
                <dirset dir="${source.dir}" defaultexcludes="true">
                    <include name="**"/>
                    <exclude name="**/.svn"/>
                </dirset>
            </classpath>
            <arg value="-out"/>
            <arg value="${gwt.module.target}"/>
            <arg value="-style"/>
            <arg value="PRETTY"/>
            <arg value="${gwt.module}"/>
            <jvmarg value="-Xms256m"  />
            <jvmarg value="-Xmx512m"  />
        </java>
    </target>


    <target name="gwt-compile" description="Compile gwt classes to javascript" depends="compile">
        <java fork="true" className="com.google.gwt.dev.Compiler" classpathref="extended.classpath">
            <classpath>
                <dirset dir="${source.dir}" defaultexcludes="true">
                    <include name="**"/>
                    <exclude name="**/.svn"/>
                </dirset>
            </classpath>
            <arg value="-war"/>
            <arg value="${gwt.module.target}"/>
            <arg value="-style"/>
            <arg value="PRETTY"/>
            <arg value="${gwt.module}"/>
            <jvmarg value="-Xms256m"  />
            <jvmarg value="-Xmx512m"  />
        </java>
    </target>
</project>
