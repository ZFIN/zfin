create procedure p_update_fish_name (vZdbId varchar(50))

define fishName like fish.fish_name;
define fishHandle like fish.fish_handle;
define vDataType varchar(30);
define fishId like fish.fish_zdb_id;

let vDataType = get_obj_type(vZdbId);

if (vDataType = "MRPHLNO" or vDataType = "CRISPR" or vDataType = "TALEN") then

foreach 

	select distinct fishstr_fish_zdb_id into fishId
	   from fish_str 
           where fishstr_str_zdb_id = vZdbId

	   let fishName = get_fish_name(fishId);
	   let fishHandle = get_fish_handle(fishId);

	   update fish
	      set fish_name = fishName
	      where fish_zdb_id = fishId;


end foreach

elif (vDataType = "GENO") then

 foreach 

	select distinct fish_zdb_id into fishId
	   from fish
           where fish_genotype_zdb_id = vZdbId

	   let fishName = get_fish_name(fishId);
	   let fishHandle = get_fish_handle(fishId);

	   update fish
	      set fish_name = fishName
	      where fish_zdb_id = fishId;

 end foreach

end if;




  


end procedure;