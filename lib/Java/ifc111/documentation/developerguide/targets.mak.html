<html><head><title></title></head>
<body bgcolor=#ffffff>

<A NAME="1001595">
<P>
</A><A NAME="996824">
<h1><FONT FACE="Helvetica,Arial">
   <center><i>
      Communication between objects

   </i></center>
</FONT></h1>
</A><A NAME="1005990">

<img src="Graphics/targets.mak.anc.gif">

he IFC provides <B>targets</B> and <B>timers</B> to let objects communicate. The <code>Target</code> interface allows any IFC object to send a message to any other IFC object without knowing anything about the recipient. A timer is an object that sends a message to a target at a predefined interval.<P></A>
<HR>
<A NAME="Targets and commands"></A>
<A NAME="1005829">
<H1><FONT FACE="Helvetica,Arial"> Targets and commands</FONT></H1>
</A><A NAME="1007368">
To be easily reusable, an object must be able to send an arbitrary message to another object without knowing the type of the receiving object. For example, you might want to connect a button to any object interested in learning when the user presses the button.<P></A>
<A NAME="1005831">
Java interfaces allow objects to define the protocol that they use to send messages to each other. For example, the <code>Button</code> class could define a <code>ButtonInterface</code>, and objects interested in receiving messages from a button could implement that interface. However, as the number of objects capable of sending messages grows, the number of interfaces becomes overwhelming. For example, the IFC library would need to define interfaces for <code>Button</code>, <code>TextField</code>, <code>Slider</code>, <code>ScrollBar</code>, <code>Timer</code>, and many other classes.<P></A>
<A NAME="1005839">
The IFC uses a single interface called <code>Target</code> instead of creating separate interfaces for each object. The <code>Target</code> interface provides the glue that allows arbitrary objects to talk to each other.<P></A>
<A NAME="Implementing targets"></A>
<A NAME="1009677">
<H2><FONT FACE="Helvetica,Arial"> Implementing targets</FONT></H2>
</A><A NAME="1009678">
The following procedure outlines the steps needed to implement targets and commands in an application:<P></A>
<ol>

<a name="1009719">
<li>Implement the <code>Target</code> interface for every object that is a potential target. Use the <code>performCommand</code> method of <code>Target</code> to specify a command for each <B>command string</B> to execute. <a href="targets.mak.html#1007334">See&nbsp;"Specifying an object as a target" on page 74</a>.
</a>


<a name="1009679">
<li>If the sending object is a predefined component, specify the command each object will send with the <code>setCommand</code> method. <a href="targets.mak.html#1006684">See&nbsp;"Sending messages to targets" on page 76</a>.
</a>


<a name="1009680">
<li>If the sending object is a predefined component, specify a target for the commands with the <code>setTarget</code> method. <a href="targets.mak.html#1006684">See&nbsp;"Sending messages to targets" on page 76</a>.
</a>


<a name="1009681">
<li>If necessary, implement the <code>ExtendedTarget</code> interface to specify that an object is capable of performing a command. <a href="targets.mak.html#1008910">See&nbsp;"Locating targets for commands" on page 77</a>.
</a>

</ol>
<HR>
<A NAME="Specifying an object as a target"></A>
<A NAME="1007334">
<H1><FONT FACE="Helvetica,Arial"> Specifying an object as a target</FONT></H1>
</A><A NAME="1007336">
To allow an object to receive messages from other objects, implement the <code>Target</code> interface as part of the object's definition. The <code>Target</code> interface contains a single method:<P></A>
<A NAME="1007337">
<PRE>public interface Target {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void performCommand(String command, Object anObject);<br>}</PRE>
</A>
<A NAME="1007552">
In this method, <em>command</em> is an arbitrary string that specifies the command requested by the caller, and <em>anObject</em> is an arbitrary object, typically the caller. Objects such as buttons and timers issue notification messages by sending the <code>performCommand</code> message to instances of classes that implement <code>Target</code>. An object interested in receiving messages from objects implements the <code>Target</code> interface and takes the appropriate action when its <code>performCommand</code> method is invoked.<P></A>
<A NAME="1007588">
For example, the <code>ColorRectangle</code> class draws a light gray rectangle onscreen. <code>ColorRectangle</code> implements the <code>Target</code> interface so users can change its color. The implementation of the <code>performCommand</code> method specifies that <code>ColorRectangle</code> calls the <code>makeGreen</code> method whenever it receives the command string <code>MAKE_GREEN</code> from a sending object, and <code>makeRed</code> when it receives <code>MAKE_RED</code>.<P></A>
<A NAME="1007591">
<PRE>public class ColorRectangle extends View implements Target{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static final String MAKE_GREEN = "makeGreen";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static final String MAKE_RED = "makeRed";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Color theColor;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public ColorRectangle(int x, int y, int width, int height) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(x, y, width, height);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theColor = Color.lightGray;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void drawView(Graphics g) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.setColor(theColor);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.fillRect(0, 0, width(), height());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void performCommand(String command, Object obj) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (MAKE_GREEN.equals(command))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;makeGreen(obj);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else if (MAKE_RED.equals(command))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;makeRed(obj);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void makeGreen(Object obj) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theColor = Color.green;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void makeRed(Object obj) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theColor = Color.red;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</PRE>
</A>
<HR>
<A NAME="Sending messages to targets"></A>
<A NAME="1006684">
<H1><FONT FACE="Helvetica,Arial"> Sending messages to targets</FONT></H1>
</A><A NAME="1007559">
Predefined components have convenience methods that let you specify a target and a command string to send to the target. When a target receives the <code>performCommand</code> message, it executes the command specified by the command string.<P></A>
<A NAME="1007809">
Predefined components issue the <code>performCommand</code> message at different times, as described in <a href="targets.mak.html#1007809">Table&nbsp;7.1</a>.

<TABLE BORDER="2">
<CAPTION></CAPTION>
<tr><th><b><A NAME="1007820">
Object<P>
</A><B><th><b><A NAME="1007822">
When the message is sent<P>
</A><B>
<tr><td><A NAME="1007824">
button<P>
</A><td><A NAME="1007826">
When the user clicks the button.<P>
</A>
<tr><td><A NAME="1007828">
color well<P>
</A><td><A NAME="1010310">
When the user drops a color into the color well.<P>
</A>
<tr><td><A NAME="1007836">
list item<P>
</A><td><A NAME="1007838">
When the user selects an item in a list view.<P>
</A>
<tr><td><A NAME="1007840">
list view<P>
</A><td><A NAME="1007842">
When the user selects an item in a list view, and the selected list item does not specify a command.<P>
</A>
<tr><td><A NAME="1007844">
menu item<P>
</A><td><A NAME="1007846">
When the user selects a menu item.<P>
</A>
<tr><td><A NAME="1007848">
pop-up menu<P>
</A><td><A NAME="1007850">
When the selects an item in a pop-up menu, and the selected list item does not specify a command<P>
</A>
<tr><td><A NAME="1007852">
slider<P>
</A><td><A NAME="1007854">
When the user changes its value.<P>
</A>
<tr><td><A NAME="1007856">
text field<P>
</A><td><A NAME="1007858">
When the user presses the Return or Tab key, or the Shift+Tab key combination.<P>
</A>
<tr><td><A NAME="1007860">
timer<P>
</A><td><A NAME="1007862">
When the timer's delay elapses.<P>
</A>

</TABLE>

<TABLE>
<TR><TD>
</TABLE>


<P></A>
<A NAME="1007864">
Use the <code>setTarget</code> message of the sending object to specify the target, and the <code>setCommand</code> message of the sending object to specify the command string that you want to send. For the text field object, <code>setTarget</code> specifies the target used when the user presses the Return key; <code>setTabField</code> and <code>setBacktabField</code> specify the target used when the user presses Tab and Shift+Tab, respectively.<P></A>
<A NAME="1006876">
The command string you specify for the list view and pop-up objects is a default; this command string is sent to the target when the list item selected by the user does not specify a command string. You do not specify a target for the list item object; you always specify the target in its list view or pop-up menu.<P></A>
<A NAME="1007881">
The following example shows how to send a message from a button to an instance of the <code>ColorRectangle</code> class described in <a href="targets.mak.html#1007334">"Specifying an object as a target" on page&nbsp;74</a>. The <code>greenButton</code> and <code>redButton</code> buttons both specify <code>colorRectangle</code> as their target in the <code>setTarget</code> method. The <code>greenButton</code> button sends the command string <code>MAKE_GREEN</code> to <code>colorRectangle</code> when a user clicks the button, and <code>redButton</code> sends the command string <code>MAKE_RED</code>.<P></A>
<A NAME="1007890">
<PRE>public class RectangleChanger extends Application {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Button greenButton, redButton;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ColorRectangle colorRectangle;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void init() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super.init();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Create a color rectangle<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorRectangle = new ColorRectangle(10, 10, 100, 100);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mainRootView().addSubview(colorRectangle);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Create a green button<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greenButton = new Button(24, 146, 100, 24);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greenButton.setTitle("Green");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greenButton.setTarget(colorRectangle);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greenButton.setCommand(ColorRectangle.MAKE_GREEN);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mainRootView().addSubview(greenButton);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Create a red button<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redButton = new Button(148, 146, 100, 24);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redButton.setTitle("Red");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redButton.setTarget(colorRectangle);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redButton.setCommand(ColorRectangle.MAKE_RED);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mainRootView().addSubview(redButton);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</PRE>
</A>
<HR>
<A NAME="Locating targets for commands"></A>
<A NAME="1008910">
<H1><FONT FACE="Helvetica,Arial"> Locating targets for commands</FONT></H1>
</A><A NAME="1008460">
In the example used for <a href="targets.mak.html#1006684">"Sending messages to targets" on page&nbsp;76</a>, the <code>setTarget</code> method explicitly specifies <code>colorRectangle</code> as the target of commands that are issued when the user clicks a button component. You do not have to specify a particular object as a target for the sending object. You can also specify that your program should use the <B>target hierarchy</B> that is built into your application to locate a target.<P></A>
<A NAME="1008630">
For example, suppose your application contains several different text field components. At any given time, each text field must allow a user to cut, copy, or paste text. In this situation, you do not want to explicitly specify the exact text field that is the target of a <code>CUT</code> command string; you simply want the appropriate text field to be the target--typically the text field that has focus.<P></A>
<A NAME="1008667">
The <code>ExtendedTarget</code> interface lets you specify a collection of objects as a possible target, and lets you use the target hierarchy to determine which target is appropriate at any given time. The <code>ExtendedTarget</code> interface includes a single method, <code>canPerformCommand</code>, that specifies which commands a target is capable of performing. When you implement <code>ExtendedTarget</code>, return true for the appropriate command string from the <code>canPerformCommand</code> method.<P></A>
<A NAME="1008700">
For example, you can implement <code>ExtendedTarget</code> for the text field object to let users perform standard text editing operations. The <code>canPerformCommand</code> method of <code>TextField</code> would look similar to the following:<P></A>
<A NAME="1010105">
<PRE>public boolean canPerformCommand(String command) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (CUT.equals(command) || PASTE.equals(command)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return isEditable();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else if (COPY.equals(command) ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return isSelectable();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br>}</PRE>
</A>
<A NAME="1008664">
For convenience, some IFC components already implement <code>ExtendedTarget</code> to support standard user interactions. <a href="targets.mak.html#1005870">See&nbsp;"Predefined commands" on page 82</a> for a list of commands built into IFC components. <a href="targets.mak.html#1008548">See&nbsp;"Extended target example" on page 79</a> for an additional example of <code>canPerformCommand</code>.<P></A>
<A NAME="The target hierarchy"></A>
<A NAME="1008686">
<H2><FONT FACE="Helvetica,Arial"> The target hierarchy</FONT></H2>
</A><A NAME="1008855">
The <code>applicationChain</code> method of <code>TargetChain</code> returns an object that can be used as the target of a command. <code>applicationChain</code> examines the <code>canPerformCommand</code> method of objects that implement <code>ExtendedTarget</code> to locate an object that can perform the command.<P></A>
<A NAME="1009012">
If you do not want to specify a particular object as a target for a sending object, use the <code>applicationChain</code> method. For example, the following code uses <code>applicationChain</code> to specify a target within the <code>setTarget</code> method:<P></A>
<A NAME="1008856">
<PRE>setTarget(TargetChain.applicationChain());</PRE>
</A>
<A NAME="1008860">
<a href="targets.mak.html#1008548">See&nbsp;"Extended target example" on page 79</a> for an additional example of using <code>applicationChain</code>.<P></A>
<A NAME="1010372">
The <code>applicationChain</code> method determines whether objects in your application implement <code>ExtendedTarget</code>, then sends them a <code>canPerformCommand</code> message. <code>applicationChain</code> examines objects in the following order:<P></A>
<ol>

<a name="1010373">
<li>The view that has focus within the top root view (the root view that has focus)
</a>


<a name="1008835">
<li>Main window's owner
</a>


<a name="1008836">
<li>Main window
</a>


<a name="1008837">
<li>Top root view
</a>


<a name="1008838">
<li>Application
</a>

</ol>
<A NAME="1008839">
Any other root view<em>s</em> in an application are not within the target hierarchy and are not checked. You can add other objects that implement <code>ExtendedTarget</code> to the target hierarchy by using the <code>addTarget</code> method of <code>TargetChain</code>. Pass the <code>addTarget</code> method a boolean argument to specify whether the view is added to the beginning or end of the target hierarchy. To add a view to the beginning of the hierarchy, specify true, as shown in the following example:<P></A>
<A NAME="1009049">
<PRE>TargetChain.addTarget(myView, true);</PRE>
</A>
<A NAME="1009050">
To remove an object from the target hierarchy, call the <code>removeTarget</code> method of <code>TargetChain</code>.<P></A>
<A NAME="Extended target example"></A>
<A NAME="1008548">
<H2><FONT FACE="Helvetica,Arial"> Extended target example</FONT></H2>
</A><A NAME="1009562">
This example lets the user click a button to change the background color of the focused object. The target of each button cannot be explicitly specified, because it varies according to which object has focus.<P></A>
<A NAME="1009601">
<B>ExtendedTarget example<p><img src="Graphics/etarget.gif">

</B>
<P>
</A>


<A NAME="1009563">
The <code>ColorField</code> class implements <code>ExtendedTarget</code> to specify that any instance of <code>ColorField</code> can respond to either the <code>MAKE_GREEN</code> or the <code>MAKE_RED</code> message. By implementing <code>ExtendedTarget</code>, you also place the <code>ColorField</code> class in the target hierarchy.<P></A>
<A NAME="1009341">
<PRE>public class ColorField extends TextField<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;implements Target, ExtendedTarget {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static final String MAKE_GREEN = "makeGreen";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static final String MAKE_RED = "makeRed";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Color theColor;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public ColorField(int x, int y, int width, int height) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(x, y, width, height);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theColor = Color.lightGray;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public boolean canPerformCommand(String command) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (MAKE_GREEN.equals(command) ||<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MAKE_RED.equals(command)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void performCommand(String command, Object obj) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (MAKE_GREEN.equals(command))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;makeGreen(obj);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else if (MAKE_RED.equals(command))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;makeRed(obj);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super.performCommand(command, obj);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<br>}</PRE>
</A>
<A NAME="1009122">
The <code>ColorChanger</code> class instantiates two color fields and two buttons for changing the color of the color field objects. The <code>setTarget</code> method of each button specifies the target with the <code>applicationChain</code> method, so the program uses the target hierarchy to find an appropriate target.<P></A>
<A NAME="1009388">
<PRE>public class ColorChanger extends Application {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Button greenButton, redButton;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ColorField colorField, colorField2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static final String MAKE_GREEN = "makeGreen";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static final String MAKE_RED = "makeRed";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void init() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super.init();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Create a color field<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorField = new ColorField(10, 10, 100, 30);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mainRootView().addSubview(colorField);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Create another color field<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorField2 = new ColorField(120, 10, 100, 30);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mainRootView().addSubview(colorField2);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Create a green button<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greenButton = new Button(24, 146, 100, 24);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greenButton.setTitle("Green");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greenButton.setTarget(TargetChain.applicationChain());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greenButton.setCommand(MAKE_GREEN);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mainRootView().addSubview(greenButton);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Create a red button<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redButton = new Button(148, 146, 100, 24);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redButton.setTitle("Red");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redButton.setTarget(TargetChain.applicationChain());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redButton.setCommand(MAKE_RED);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mainRootView().addSubview(redButton);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</PRE>
</A>
<A NAME="1009370">
When the user clicks the <code>greenButton</code> button, it sends a <code>performCommand</code> message with the <code>MAKE_GREEN</code> command string. Because the <code>setTarget</code> method specifies <code>applicationChain</code>, the program searches for an <code>ExtendedTarget</code> that is capable of performing the <code>MAKE_GREEN</code> command.<P></A>
<A NAME="1009521">
The target chain uses the <code>canPerformCommand</code> method of the <code>ColorField</code> class to determine that a <code>ColorField</code> instance is a possible target for <code>MAKE_GREEN</code>. Because the program has two instances of <code>ColorField</code>, it uses the target hierarchy to determine which <code>ColorField</code> instance will execute the command. The first view that the target hierarchy examines is the focused view; therefore, the program changes the color of the color field that has focus.<P></A>
<HR>
<A NAME="Predefined commands"></A>
<A NAME="1005870">
<H1><FONT FACE="Helvetica,Arial"> Predefined commands</FONT></H1>
</A><A NAME="1007351">
The <code>ExtendedTarget</code> interface defines a set of command strings that are used by certain IFC objects for many common interactions. For example, the <code>SET_FONT</code> command string is used to set an object's font. These commands are provided for your convenience; you are not limited to using only this set of commands.<P></A>
<A NAME="1008178">
To use a predefined command, implement <code>ExtendedTarget</code> and return true for the appropriate command string from the <code>canPerformCommand</code> method, as described in <a href="targets.mak.html#1008910">"Locating targets for commands" on page&nbsp;77</a>. The <code>performCommand</code> method must take the appropriate action when it receives one of these command strings.<P></A>
<A NAME="1008358">
The complete set of predefined commands is described in <a href="targets.mak.html#1008358">Table&nbsp;7.1</a>.

<TABLE BORDER="2">
<CAPTION></CAPTION>
<tr><th><b><A NAME="1008366">
Object<P>
</A><B><th><b><A NAME="1008368">
Predefined commands supported<P>
</A><B>
<tr><td><A NAME="1008370">
root view<P>
</A><td><A NAME="1008372">
<code>SHOW_FONT_CHOOSER<br>SHOW_COLOR_CHOOSER<br>NEW_FONT_SELECTION</code><P>
</A>
<tr><td><A NAME="1010440">
text view<P>
</A><td><A NAME="1008380">
<code>SET_FONT</code><P>
</A>

</TABLE>

<TABLE>
<TR><TD>
</TABLE>


<P></A>
<A NAME="1007358">
The objects listed in <a href="targets.mak.html#1008358">Table&nbsp;7.1</a> implement <code>ExtendedTarget</code> and return true in the <code>canPerformCommand</code> method for the shown predefined commands.<P></A>
<HR>
<A NAME="Working with Timers"></A>
<A NAME="1009642">
<H1><FONT FACE="Helvetica,Arial"> Working with Timers</FONT></H1>
</A><A NAME="1007359">
A timer is an object that sends a <code>performCommand</code> message to its target after a specified interval elapses. Use the <code>start</code> method in the <code>Timer</code> class to start the timer running, and the <code>stop</code> method to stop it.<P></A>
<A NAME="1010020">
For example, you can use a timer to run a simple animation by making it show the next frame after a specified number of milliseconds elapses. Such a timer is especially useful, because it can operate an animation while letting the application continue to respond to user input.<P></A>
<A NAME="1006994">
Supporting this type of concurrent behavior usually requires spawning additional threads, and managing the resource locks and synchronization schemes necessary to create thread-safe code. Timers enable concurrent behavior without the need to spawn threads.<P></A>
<A NAME="1007121">
Create a timer with the constructor shown in the following prototype:<P></A>
<A NAME="1007129">
<PRE>public Timer(Target target, String command, int delay)</PRE>
</A>
<A NAME="1007141">
The timer sends the message <em>command</em> to its <em>target</em> every <em>delay</em> milliseconds. This constructor associates a timer with the application's default event loop; a second form of the constructor lets you specify the event loop.<P></A>
<A NAME="1007131">
The following example uses a timer to run an animation. The <code>startButton</code> and <code>stopButton</code> buttons call the <code>start</code> and <code>stop</code> methods to control the timer, and the timer uses the <code>NEXT_FRAME</code> command to run the animation.<P></A>
<A NAME="1007115">
<PRE>public class MovieView extends View implements Target {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Button startButton, stopButton;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Timer timer;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static final String START = "start";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static final String STOP = "stop";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static final String NEXT_FRAME = "nextFrame";<br>    <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void init() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super.init();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startButton = new Button(24, 146, 100, 24);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startButton.setTitle("Start");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startButton.setTarget(this);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startButton.setCommand(START);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mainRootView().addSubview(startButton);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopButton = new Button(148, 146, 100, 24);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopButton.setTitle("Stop");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopButton.setTarget(this);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopButton.setCommand(STOP);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mainRootView().addSubview(stopButton);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Create a timer<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer = new Timer(this, NEXT_FRAME, 2000);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void performCommand(String command, Object obj) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (START.equals(command))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer.start();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else if (STOP.equals(command))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer.stop();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else if (NEXT_FRAME.equals(command))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<br>}</PRE>
</A>
<A NAME="1007006">
Additional methods in the <code>Timer</code> class let you have more control over a timer. For example, the <code>setInitialDelay</code> method lets you change the amount of time that elapses before a timer begins, and the <code>setCoalesce</code> method lets you specify whether to coalesce multiple pending timer messages. <a href="events.mak.html#1005650">See&nbsp;"Event coalescing" on page 49 for more information.</a><P></A>

<hr><br>

<P>
<SCRIPT>
document.write("<FONT SIZE=-2>Last modified " + document.lastModified)
</SCRIPT>
<P>
</body>
</html>
