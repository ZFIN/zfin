<html><head><title></title></head>
<body bgcolor=#ffffff>

<A NAME="1001595">
<P>
</A><A NAME="1005974">
<h1><FONT FACE="Helvetica,Arial">
   <center><i>
      Imaging and animation

   </i></center>
</FONT></h1>
</A><A NAME="1006008">

<img src="Graphics/animate.mak.anc.gif">

pplications use <B>imaging</B> and display animations to provide user feedback or to liven up a user interface. In IFC terms, imaging refers to displaying an object defined by the <code>Image</code> or <code>Bitmap</code> class. An animation is simply a collection of images displayed in rapid succession to create the illusion of continuous movement or changes.<P></A>
<A NAME="1009180">
The IFC provides the following classes for imaging and working with animations:<P></A>
<ul><A NAME="1009193">
<LI>The <code>Image</code> class is an abstract base class; subclasses of <code>Image</code> represent objects that can draw themselves within an instance of a <em>Rect</em>.
</A><A NAME="1009194">
<LI>The <code>Bitmap</code> class represents bitmaps that can draw themselves within an instance of a <em>Rect</em>.
</A><A NAME="1009196">
<LI>The <code>DrawingSequence</code> class is an abstract subclass of <code>Image</code>; subclasses of <code>DrawingSequence</code> animate a sequence of frames by changing the frame number and drawing the frame.
</A><A NAME="1009197">
<LI>The <code>ImageSequence</code> class animates a sequence of images.
</A></ul><A NAME="1009764">
<B>The imaging and animation hierarchy
<img src="Graphics/animate.mak.anc1.gif">


</B>
<P>
</A>


<A NAME="1009966">
The IFC also provides an interface, <code>DrawingSequenceOwner</code>, for objects that need to be notified about changes to a <B>drawing sequence</B>. The IFC notifies the class that implements <code>DrawingSequenceOwner</code> about changes to the owned sequence, and the owner then takes the appropriate action.<P></A>
<HR>
<A NAME="Working with images"></A>
<A NAME="1007090">
<H1><FONT FACE="Helvetica,Arial"> Working with images</FONT></H1>
</A><A NAME="1007096">
In IFC terms, an <B>image</B> is an object that can draw itself in a rectangle. The <code>Image</code> class provides the foundation for imaging and animation in the IFC. <code>Image</code> is an abstract class; the <code>Bitmap</code> class, used for working with bitmaps, and the <code>DrawingSequence</code> class, used for animating <B>frames</B>, are both extensions of <code>Image</code>. The <code>ImageSequence</code> class is a subclass of <code>DrawingSequence</code> that is used specifically for animating images.<P></A>
<A NAME="1008659">
Because <code>Bitmap</code>, <code>DrawingSequence</code>, and <code>ImageSequence</code> are all subclasses of image, you have a great deal of flexibility in providing values for methods that take images as an argument. For example, the <code>setImage</code> method lets you specify the image that appears on a button. You can easily specify either a bitmap or an animation for <code>setImage</code>, because <code>Bitmap</code> and <code>ImageSequence</code> are both subclasses of <code>Image</code>.<P></A>
<A NAME="1007113">
To create a custom image, subclass <code>Image</code> and provide an implementation for the <code>width</code>, <code>height</code>, and <code>drawAt</code> methods. In addition, if your object is capable of scaling itself, you should implement the <code>drawScaled</code> method.<P></A>
<A NAME="1007358">
For example, suppose you want to create a custom <code>Image</code> class to draw a set of concentric rectangles that gradually darken as they move from the edge to the center. <a href="animate.mak.html#1007365">Figure 6.2</a> shows what such an image could look like.<P></A>
<A NAME="1007365">
<B>A custom image that draws concentric rectangles<p><img src="Graphics/concent.gif">

</B>
<P>
</A>


<A NAME="1007374">
The following code subclasses <code>Image</code> and creates the <code>TunnelImage</code> class, which draws this set of concentric rectangles:<P></A>
<A NAME="1007140">
<PRE>public class TunnelImage extends Image {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int width, height;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public TunnelImage(int width, int height) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.width = width;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.height = height;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void drawScaled(Graphics g, int x, int y,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int width, int height) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rect  rect;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// The drawn rectangle<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int   gray;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Current gray shade<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float interp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Used for interpolating the grays<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float increment;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Gray adjustment increment per rectangle<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rect = new Rect(x, y, width, height);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interp = 1.0f;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment = 1.0f / (float)(Math.max(width, height) / 2);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while ((rect.width &gt; 0) || (rect.height &gt; 0)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gray = (int)(interp * 255.0f); // compute the current gray level<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interp -= increment;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.setColor(new Color(gray, gray, gray)); // reset the color<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.drawRect(rect);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rect.growBy(-1, -1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  // shrink the rectangle<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void drawAt(Graphics g, int x, int  y) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawScaled(g, x, y, width, height);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public int width() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return width;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public int height() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return height;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</PRE>
</A>
<A NAME="1007130">
In this example, the <code>drawScaled</code> method performs the actual drawing work, and the <code>drawAt</code> method simply calls <code>drawScaled</code>. The <code>while</code> loop within <code>drawScaled</code> calculates the current gray value, resets the color to a slightly darker gray, draws a rectangle, and then shrinks the next rectangle by one pixel. The <code>width</code> and <code>height</code> methods return the dimensions used by the <code>TunnelImage</code> constructor.<P></A>
<A NAME="1007291">
The <code>Image</code> class also provides the <code>drawCentered</code> method to draw an image centered within a specified rect object, and <code>drawTiled</code> to tile an image within a specified rect object.<P></A>
<A NAME="Displaying images"></A>
<A NAME="1007471">
<H2><FONT FACE="Helvetica,Arial"> Displaying images</FONT></H2>
</A><A NAME="1008375">
Any view can display an image. For convenience, the root view and IFC components that commonly display images, such as button, container view, and list item, provide the <code>setImage</code> method; the <code>Slider</code> class uses <code>setImage</code> to specify the image the slider displays within its groove. Use <code>setImage</code> to specify an image for the component to display.<P></A>
<A NAME="1008376">
For example, you can use a container view to display the <code>TunnelImage</code> image described in <a href="animate.mak.html#1007090">"Working with images" on page&nbsp;60</a> as follows:<P></A>
<A NAME="1007502">
<PRE>containerView = new ContainerView(10, 35, 200, 200);<br>containerView.setImage(tunnelImage);<br>mainRootView().addSubview(containerView);</PRE>
</A>
<A NAME="1007500">
The <code>RootView</code>, <code>ContainerView</code>, and <code>Slider</code> classes also provide the <code>setImageDisplayStyle</code> method, which lets you specify whether the image should be centered, tiled, or scaled. The button component lets you specify the relationship between an image and the button title with the <code>setImagePosition</code> method.<P></A>
<A NAME="1007524">
You can also use a custom view to display an image. For example, you can use a <code>View</code> subclass such as <code>TunnelImageView</code>, shown below, to display the <code>TunnelImage</code> object described in <a href="animate.mak.html#1007090">"Working with images" on page&nbsp;60</a>:<P></A>
<A NAME="1007553">
<PRE>public class TunnelImageView extends View {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TunnelImage tunnelImage;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public TunnelImageView(int x, int y, int width, int height) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(x, y, width, height);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tunnelImage = new TunnelImage(width, height);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void drawView(Graphics g) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tunnelImage.drawAt(g, 0, 0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</PRE>
</A>
<A NAME="1007543">
In this example, the <code>TunnelImageView</code> constructor instantiates the <code>TunnelImage</code>, and the <code>drawView</code> method specifies how to display the <code>TunnelImage</code>.<P></A>
<HR>
<A NAME="Working with bitmaps"></A>
<A NAME="1007682">
<H1><FONT FACE="Helvetica,Arial"> Working with bitmaps</FONT></H1>
</A><A NAME="1007683">
The <code>Bitmap</code> class, an extension of <code>Image</code>, provides support for working with bitmaps. Use the <code>bitmapNamed</code> method of <code>Bitmap</code> to specify and load a bitmap. For example, the following code loads the data in the file <code>fish.gif</code> immediately:<P></A>
<A NAME="1007658">
<PRE>Bitmap.bitmapNamed("fish.gif");</PRE>
</A>
<A NAME="1007657">
You can also specify a boolean argument to postpone loading the bitmap data until its information is needed. For example, you can postpone loading the data until the bitmap's width or height is needed, or until the bitmap needs to draw itself onscreen:<P></A>
<A NAME="1007670">
<PRE>Bitmap.bitmapNamed("fish.gif", false);</PRE>
</A>
<A NAME="1007659">
By default, the IFC looks for bitmaps in the <code>images</code> subdirectory directly beneath the code base directory. For example, if the code base for an application is the <code>fishApp</code> directory, the previous examples look for <code>fish.gif</code> in the <code>fishApp/images</code> directory.<P></A>
<A NAME="1007692">
You can also use the <code>bitmapNamed</code> method to specify locations relative to the <code>images</code> subdirectory. For example, the following code looks for <code>flounder.gif</code> in the <code>fish</code> subdirectory of <code>images</code>:<P></A>
<A NAME="1009888">
<PRE>bitmap = Bitmap.bitmapNamed("fish/flounder.gif");</PRE>
</A>
<A NAME="1009889">
Use the <code>bitmapFromURL</code> method to load a bitmap from any URL.<P></A>
<A NAME="1007794">
Because bitmaps are images, you display them in a view as described in <a href="animate.mak.html#1007471">"Displaying images" on page&nbsp;62</a>. For example, the following code displays a bitmap to the left of the title on a button, as shown in <a href="animate.mak.html#1007832">Figure 6.3</a>.<P></A>
<A NAME="1007823">
<PRE>stopButton.setTitle("Stop")<br>stopButton.setImage(Bitmap.bitmapNamed("stop.gif"));<br>stopButton.setImagePosition(Button.IMAGE_ON_LEFT);</PRE>
</A>
<A NAME="1007832">
<B><em>Bitmaps</em> displayed on <em>Buttons</em><p><img src="Graphics/buttbit.gif">

</B>
<P>
</A>


<HR>
<A NAME="Creating DrawingSequence animations"></A>
<A NAME="1007906">
<H1><FONT FACE="Helvetica,Arial"> Creating DrawingSequence animations</FONT></H1>
</A><A NAME="1008024">
The <code>DrawingSequence</code> class is the foundation for animation support in the IFC. <code>DrawingSequence</code> is an abstract subclass of <code>Image</code>; subclasses of <code>DrawingSequence</code> animate a sequence of frames. The <code>ImageSequence</code> class, used for animating images, is another subclass of <code>DrawingSequence</code>.<P></A>
<A NAME="1007914">
A drawing sequence is a set of frames that is displayed one at a time at a specified rate. The current frame number determines the image that the sequence draws. Depending on the direction of the sequence, the frame number is incremented or decremented to display the next frame.<P></A>
<A NAME="1008454">
For example, suppose you want to display a green circle within a white rectangle. The green circle should grow until it reaches the boundary of the white rectangle, and then shrink in successive steps until it disappears, before starting its animation again.<P></A>
<A NAME="1008455">
You could define the green circle and the way it draws in a <code>DrawingSequence</code> subclass called <code>CircleSequence</code>. You could then define the white rectangle that contains the green circle as a <code>View</code> subclass called <code>CircleView</code> that implements <code>DrawingSequenceOwner</code>.<P></A>
<A NAME="1008467">
This simple animation is shown in <a href="animate.mak.html#1009295">Figure 6.4</a>. The code that defines <code>CircleSequence</code> is shown in <a href="animate.mak.html#1008350">"Defining the drawing sequence" on page&nbsp;66</a>, and the code defining <code>CircleView</code> is shown in <a href="animate.mak.html#1008354">"Defining the DrawingSequenceOwner" on page&nbsp;67</a>.<P></A>
<A NAME="1009295">
<B>An animated circle<p><img src="Graphics/gcircle.gif">

</B>
<P>
</A>


<A NAME="Implementing a drawing sequence"></A>
<A NAME="1009296">
<H2><FONT FACE="Helvetica,Arial"> Implementing a drawing sequence</FONT></H2>
</A><A NAME="1009297">
The following procedure outlines the steps needed to implement an animation with a drawing sequence:<P></A>
<ol>

<a name="1008289">
<li>Extend <code>DrawingSequence</code> and override the <code>drawAt</code> method to specify how the sequence will draw itself. <a href="animate.mak.html#1008350">See&nbsp;"Defining the drawing sequence" on page 66 for more information.</a>
</a>


<a name="1008292">
<li>Override the <code>width</code> and <code>height</code> methods in the class that extends <code>DrawingSequence</code> to specify the dimensions of the animation. <a href="animate.mak.html#1008350">See&nbsp;"Defining the drawing sequence" on page 66 for more information.</a>
</a>


<a name="1008700">
<li>Specify a frame rate, the total number of frames in the sequence, and the direction of the sequence with <code>setFrameRate</code>, <code>setFrameCount</code>, and <code>setPlaybackMode</code>. <a href="animate.mak.html#1008350">See&nbsp;"Defining the drawing sequence" on page 66 for more information.</a>
</a>


<a name="1008701">
<li>Implement <code>DrawingSequenceOwner</code> in the <code>View</code> subclass that will own the drawing sequence. Provide an implementation for <code>drawingSequenceFrameChanged</code> and <code>drawingSequenceCompleted</code>. <a href="animate.mak.html#1008354">See&nbsp;"Defining the DrawingSequenceOwner" on page 67 for more information.</a>
</a>


<a name="1008318">
<li>Override the <code>drawView</code> method in the owner and use it to call the <code>drawAt</code> method of the drawing sequence. <a href="animate.mak.html#1008354">See&nbsp;"Defining the DrawingSequenceOwner" on page 67 for more information.</a>
</a>

</ol>
<A NAME="Defining the drawing sequence"></A>
<A NAME="1008350">
<H2><FONT FACE="Helvetica,Arial"> Defining the drawing sequence</FONT></H2>
</A><A NAME="1008356">
To create an animation with a drawing sequence, subclass <code>DrawingSequence</code> to create a custom class. Override the <code>drawAt</code> method in the custom class to specify how the sequence will draw, then override <code>width</code> and <code>height</code> to specify the size of the sequence.<P></A>
<A NAME="1008396">
Call the set-prefixed methods in the constructor of the sequence to specify information about the sequence. For example, <code>setPlaybackMode</code> specifies the direction in which the sequence animates, and <code>setFrameRate</code> specifies the speed of the animation in milliseconds. You must specify the number of frames with <code>setFrameCount</code>, or the sequence will throw an exception.<P></A>
<A NAME="1008496">
For example, the following code creates the <code>CircleSequence</code> that draws the green circle animation shown in <a href="animate.mak.html#1009295">Figure 6.4</a>:<P></A>
<A NAME="1008513">
<PRE>public class CircleSequence extends DrawingSequence {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int width, height;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public CircleSequence(int width, int height,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DrawingSequenceOwner owner) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(owner);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.width = width;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.height = height;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setFrameRate(100);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setFrameCount(width / 2);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setPlaybackMode(DrawingSequence.BOUNCE);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public int width() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return width;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public int height() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return height;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void drawAt(Graphics g, int x, int y) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.setColor(Color.green);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.drawOval(x + width()/2 - currentFrameNumber(),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y + height()/2 - currentFrameNumber(),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2*currentFrameNumber(), 2*currentFrameNumber());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</PRE>
</A>
<A NAME="1008597">
In this example, <code>width</code> and <code>height</code> simply return the dimensions passed to the constructor when the <code>CircleSequence</code> is initialized. The <code>drawAt</code> method sets the color as green and calls <code>drawOval</code> to draw the circle. The values passed to <code>drawOval</code> change the drawing origin as the frame number changes and increase or decrease the size of the circle based on the frame number.<P></A>
<A NAME="Defining the DrawingSequenceOwner"></A>
<A NAME="1008354">
<H2><FONT FACE="Helvetica,Arial"> Defining the DrawingSequenceOwner</FONT></H2>
</A><A NAME="1008355">
Because a <code>DrawingSequence</code> is not a view, it cannot draw itself onscreen. Instead, it notifies its owner when its frame number changes and when the sequence completes. The owner, usually a view, calls the <code>drawAt</code> method of the sequence.<P></A>
<A NAME="1008716">
Implement the <code>DrawingSequenceOwner</code> interface to specify an object as the owner of a drawing sequence. <code>DrawingSequenceOwner</code> defines two methods. Specify what action the owner should take when the frame in the sequence changes in the implementation of the <code>drawingSequenceFrameChanged</code> method. Specify what behavior you want to occur when the sequence completes in the <code>drawingSequenceCompleted</code> method.<P></A>
<A NAME="1008745">
For example, the following code creates the <code>CircleView</code> class that owns the <code>CircleSequence</code> described in <a href="animate.mak.html#1008350">"Defining the drawing sequence" on page&nbsp;66</a>:<P></A>
<A NAME="1008758">
<PRE>public class CircleView extends View implements DrawingSequenceOwner {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CircleSequence sequence;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public CircleView(int x, int y, int width, int height){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(x, y, width, height);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sequence = new CircleSequence(width, height, this);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sequence.start();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void drawingSequenceFrameChanged(DrawingSequence aSequence) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;draw();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void drawingSequenceCompleted(DrawingSequence aSequence) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public boolean isTransparent() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public void drawView(Graphics g){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.setColor(Color.white);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.fillRect(0, 0, width(), height());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sequence.drawAt(g, 0, 0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</PRE>
</A>
<A NAME="1010213">
In this example, the owner's constructor instantiates a <code>CircleSequence</code>. The owner redraws the <code>CircleSequence</code> every time a frame changes, and takes no special action when the <code>CircleSequence</code> completes. The <code>drawView</code> method of the owner calls the <code>drawAt</code> method of <code>CircleSequence</code> to draw the sequence.<P></A>
<HR>
<A NAME="Creating ImageSequence animations"></A>
<A NAME="1007895">
<H1><FONT FACE="Helvetica,Arial"> Creating ImageSequence animations</FONT></H1>
</A><A NAME="1008879">
The <code>ImageSequence</code> class is a <code>DrawingSequence</code> subclass that makes it easy to animate a collection of images. Supply the <B>image sequence</B> with a list of images, then use the set-prefixed methods inherited from <code>DrawingSequence</code> to specify features such as a frame rate and a playback direction.<P></A>
<A NAME="1008881">
Unlike <code>DrawingSequence</code>, you do not create a custom subclass to define an <code>ImageSequence</code>; instead, you call the <code>ImageSequence</code> constructor and instantiate the <code>ImageSequence</code> as you instantiate a component. Because <code>ImageSequence</code> is a subclass of <code>Image</code>, you can display it in any view, as described in <a href="animate.mak.html#1007471">"Displaying images" on page&nbsp;62</a>.<P></A>
<A NAME="1008893">
For example, suppose you want to display an animation on a button instead of displaying the static bitmaps shown in <a href="animate.mak.html#1007832">Figure 6.3</a>. You can animate the images displayed on these button<em>s</em> to indicate which button a user selects. When a user clicks a button, a new animation starts, causing the bitmap on the selected button to flash; the animation displayed on any other button stops.<P></A>
<A NAME="1008898">
The following code shows how to display an animation on the Pause button illustrated in <a href="animate.mak.html#1007832">Figure 6.3</a>:<P></A>
<A NAME="1008923">
<PRE>ImageSequence pauseSequence;<br>Button pauseButton;<br>static final String PAUSE = "pause";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>public void init() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super.init();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Add the Pause button<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseButton = new Button(24, 24, 55, 20);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseButton.setTitle("Pause");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseButton.setType(Button.TOGGLE_TYPE);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseButton.setTarget(this);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseButton.setCommand(PAUSE);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseButton.setEnabled(true);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// The button's image will be an ImageSequence<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseSequence = new ImageSequence();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseSequence.addImage(Bitmap.bitmapNamed("pause1.gif"));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseSequence.addImage(Bitmap.bitmapNamed("pause2.gif"));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseSequence.setPlaybackMode(DrawingSequence.FORWARD_LOOP);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseSequence.setFrameRate(500);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseButton.setImage(pauseSequence);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseButton.setImagePosition(Button.IMAGE_ON_LEFT);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mainRootView().addSubview(pauseButton);<br>}</PRE>
</A>
<A NAME="1009054">
The previous example creates the <code>ImageSequence</code> <code>pauseSequence</code>. The <code>addImage</code> method sequentially specifies the images displayed by the sequence. The set-prefixed methods of <code>pauseSequence</code> specify the frame rate and playback direction of the sequence. The <code>setImage</code> method of <code>pauseButton</code> displays the <code>pauseSequence</code> on the button.<P></A>
<A NAME="1009053">
To control the animation displayed on <code>pauseButton</code>, implement the <code>Target</code> interface and use its <code>performCommand</code> method, as shown in the following code:<P></A>
<A NAME="1009026">
<PRE>public void performCommand(String command, Object object) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (PAUSE.equals(command)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (pauseButton.state()) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseSequence.start();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Start the pause button flashing<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseSequence.stop();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Stop the pause button flashing<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pauseSequence.setCurrentFrameNumber(0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</PRE>
</A>
<A NAME="1010245">
See <a href="targets.mak.html#996824">"Communication between objects" on page&nbsp;73</a> for more information about the <code>Target</code> interface.<P></A>
<A NAME="1010246">
The code in the previous example executes if a user clicks <code>pauseButton</code>, because its <code>setCommand</code> method specifies the <code>PAUSE</code> command string. The <code>state</code> method determines if the button is toggled down or up by the user click. When a user click toggles <code>pauseButton</code> down, the <code>start</code> method runs <code>pauseSequence</code>, and the button appears to flash. When a user toggles <code>pauseButton</code> up, the <code>pauseSequence</code> stops.<P></A>
<A NAME="Specifying bitmaps for the sequence"></A>
<A NAME="1005743">
<H2><FONT FACE="Helvetica,Arial"> Specifying bitmaps for the sequence</FONT></H2>
</A><A NAME="1009107">
You can specify the bitmaps that an image sequence displays in any of the following ways:<P></A>
<ul><A NAME="1009108">
<LI>Use the <code>addImage</code> method to specify each image individually
</A><A NAME="1009109">
<LI>Use the <code>addImagesFromName</code> method to specify a starting image for the sequence
</A><A NAME="1009110">
<LI>Use the <code>setImageStrip</code> method to specify an image strip containing all the images for the sequence
</A></ul><A NAME="1009938">
Use <code>addImage</code> when you have only a few images in an image sequence, because you must call <code>addImage</code> for each image that you want to display. The example in <a href="animate.mak.html#1007895">"Creating ImageSequence animations" on page&nbsp;69</a> uses <code>addImage</code> to specify the bitmaps for <code>pauseSequence</code> because there are only two bitmaps in the sequence.<P></A>
<A NAME="1009118">
The <code>addImagesFromName</code> method is more convenient when you need to use many bitmaps in an image sequence. Make sure the images are numbered sequentially; for example, a three bitmap sequence animating a fish could be <code>fish0.gif</code>, <code>fish1.gif</code>, and <code>fish2.gif</code>. You cannot use bitmaps numbered with a leading 0 character, such as <code>fish01.gif</code>, or bitmaps numbered before the character string, such as <code>1fish.gif</code>. Specify the first bitmap in the sequence and the total number of bitmaps when you call <code>addImagesFromName</code>, as follows:<P></A>
<A NAME="1009125">
<PRE>fishSequence.addImagesFromName("fish0.gif", 3);</PRE>
</A>
<A NAME="1009129">
If you use image strips to store your images, you can specify the images in a sequence with the <code>setImageStrip</code> method. <a href="animate.mak.html#1009138">Figure 6.5</a> shows a typical image strip.<P></A>
<A NAME="1009138">
<B>Image strip with five bitmaps<p><img src="Graphics/fish.gif">

</B>
<P>
</A>


<A NAME="1009128">
Specify the orientation of the image strip and the dimensions of its images with the <code>setFrameWidth</code> or <code>setFrameHeight</code> methods. If the image strip is oriented horizontally, as shown in <a href="animate.mak.html#1009138">Figure 6.5</a>, call <code>setFrameWidth</code> and specify the width of each image in pixels, as shown in following code:<P></A>
<A NAME="1009152">
<PRE>fishSequence.setFrameWidth(74);</PRE>
</A>
<A NAME="1009146">
If the image strip is oriented vertically, call <code>setFrameHeight</code> and specify the height of each image.images.<P></A>

<hr><br>

<P>
<SCRIPT>
document.write("<FONT SIZE=-2>Last modified " + document.lastModified)
</SCRIPT>
<P>
</body>
</html>
