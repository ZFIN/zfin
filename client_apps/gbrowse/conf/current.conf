

[GENERAL]
description   = Ensembl (Zv9)
db_adaptor    = Bio::DB::SeqFeature::Store
db_args       = -adaptor DBI::mysql
               -dsn	  dbi:mysql:database=ensembl_current
               -user    nobody



plugins       = FastaDumper Submitter

drag and drop       = 1
balloon tips        = 1
titles are balloons = 0

# list of tracks to turn on by default
default features = genes mRNA clone genesVega Ensembl_mRNA phenotype expression antibody clone morpholino insertion


# examples to show in the introduction
examples = fgf8a 16:22955000..23015000 ZDB-GENE-040630-3 NM_130997 NP_571379 CH211-11C20 hox* 

# what image widths to offer
image widths  = 450 640 800 1024

# default width of detailed view (pixels)
default width = 800

# Web site configuration info
#gbrowse root		 = /gb/gbrowse 
stylesheet  = /gbrowse/gbrowse.css
buttons     = /gbrowse/images/buttons
tmpimages   = /gbrowse/tmp
js           = js

# feature to show on startup
initial landmark = 14:27373000..27548000 

# max and default segment sizes for detailed view
max segment     = 50000000
default segment = 5000

# zoom levels
zoom levels    = 100 200 1000 5000 10000 20000 50000 100000 200000 500000 2000000

# colors of the overview, detailed map and key
overview bgcolor = lightgrey
detailed bgcolor = lightgrey
key bgcolor      = lightgrey

label density = 25
bump density  = 100

# "automatic" classes to try when an unqualified identifier is given
automatic classes = gene mRNA clone

# other customization options...

onload	= hdrSetTabs();

# HTML TO INSERT AT VARIOUS STRATEGIC LOCATIONS
# inside the <head></head> section
head = <LINK rel=stylesheet type="text/css" href="/css/zfin.css"> <LINK rel=stylesheet type="text/css" href="/css/header.css">

# at the top...
header = <script language="JavaScript" src="/javascript/header.js" type="text/javascript"></script> <style type="text/css"> body { margin-top: 0 }</style> <div style="height: 80px">&nbsp;</div>


# a footer
footer = <script language="JavaScript" src="/javascript/footer.js" type="text/javascript"></script>

# Various places where you can insert your own HTML -- see configuration docs
html1 = 
html2 = 
html3 = 
html4 = 
html5 = 
html6 = 

# Advanced feature: an example of a customized popup menu for rubber band selection
[OVERVIEW SELECT MENU]
width = 100
html  =  <table style="width:100%">
         <tr>
           <th style="background:lightgrey">
             Overview
             </span>
           </th>
         </tr>
         <tr>
           <td>
             <span style="color:blue;cursor:pointer" onclick="SelectArea.prototype.clearAndSubmit()">
              Zoom
             </span>
           </td>
         </tr>
         <tr>
           <td>
             <span style="color:blue;cursor:pointer" onclick="SelectArea.prototype.cancelRubber()">
               Cancel
             </span>
           </td>
         </tr>
        </table>


[DETAIL SELECT MENU]
width = 250
html  = <table style="width:100%">
         <tr>
           <th style="background:lightgrey;cell-padding:5">
             SELECTION
             <span style="right:0px;position:absolute;color:blue;cursor:pointer"
                   onclick="SelectArea.prototype.cancelRubber()">
               [X]
             </span>
           </th>
         </tr>
         <tr>
           <td>
             <span style="color:blue;cursor:pointer" onclick="SelectArea.prototype.clearAndSubmit()">
              Zoom in
             </span>
           </td>
         </tr>
         <tr>
           <td>
             <span style="color:blue;cursor:pointer" onclick="SelectArea.prototype.clearAndRecenter()">
               Recenter on this region
             </span>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?plugin=FastaDumper;plugin_action=Go;name=SELECTION" target="_BLANK">
              Dump selection as FASTA
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?name=SELECTION;plugin=Submitter;plugin_do=Go;Submitter.target=ZFIN_BLAST" target="_BLANK">
               Submit selection to <b>ZFIN BLAST</b>
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?name=SELECTION;plugin=Submitter;plugin_do=Go;Submitter.target=UCSC_BLAT" target="_BLANK">
               Submit selection to UCSC BLAT
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?name=SELECTION;plugin=Submitter;plugin_do=Go;Submitter.target=NCBI_BLAST" target="_BLANK">
               Submit selection to NCBI BLAST
             </a>
           </td>
         </tr>
       </table>

# Configuration for submitter plugin (used in above menu)
[Submitter:plugin]
submitter = [UCSC_BLAT]
            url        = http://genome.ucsc.edu/cgi-bin/hgBlat
            seq_label  = userSeq
            output     = hyperlink
            type       = DNA
            extra_html = Genome:
                         <SELECT name=org>
                         <OPTION VALUE="Human">Human</OPTION>
                         <OPTION VALUE="Chimp">Chimp</OPTION>
                         <OPTION VALUE="Orangutan">Orangutan</OPTION>
                         <OPTION VALUE="Rhesus">Rhesus</OPTION>
                         <OPTION VALUE="Marmoset">Marmoset</OPTION>
                         <OPTION VALUE="Mouse">Mouse</OPTION>
                         <OPTION VALUE="Rat">Rat</OPTION>
                         <OPTION VALUE="Guinea Pig">Guinea Pig</OPTION>

                         <OPTION VALUE="Cat">Cat</OPTION>
                         <OPTION VALUE="Dog">Dog</OPTION>
                         <OPTION VALUE="Horse">Horse</OPTION>
                         <OPTION VALUE="Cow">Cow</OPTION>
                         <OPTION VALUE="Opossum">Opossum</OPTION>
                         <OPTION VALUE="Platypus">Platypus</OPTION>
                         <OPTION VALUE="Chicken">Chicken</OPTION>
                         <OPTION VALUE="Zebra finch">Zebra finch</OPTION>
                         <OPTION VALUE="Lizard">Lizard</OPTION>

                         <OPTION VALUE="X. tropicalis">X. tropicalis</OPTION>
                         <OPTION SELECTED VALUE="Zebrafish">Zebrafish</OPTION>
                         <OPTION VALUE="Tetraodon">Tetraodon</OPTION>
                         <OPTION VALUE="Fugu">Fugu</OPTION>
                         <OPTION VALUE="Stickleback">Stickleback</OPTION>
                         <OPTION VALUE="Medaka">Medaka</OPTION>
                         <OPTION VALUE="Lamprey">Lamprey</OPTION>
                         <OPTION VALUE="Lancelet">Lancelet</OPTION>
                         <OPTION VALUE="C. intestinalis">C. intestinalis</OPTION>

                         <OPTION VALUE="S. purpuratus">S. purpuratus</OPTION>
                         <OPTION VALUE="C. elegans">C. elegans</OPTION>
                         <OPTION VALUE="C. brenneri">C. brenneri</OPTION>
                         <OPTION VALUE="C. briggsae">C. briggsae</OPTION>
                         <OPTION VALUE="C. remanei">C. remanei</OPTION>
                         <OPTION VALUE="C. japonica">C. japonica</OPTION>
                         <OPTION VALUE="P. pacificus">P. pacificus</OPTION>
                         <OPTION VALUE="D. melanogaster">D. melanogaster</OPTION>
                         <OPTION VALUE="D. simulans">D. simulans</OPTION>

                         <OPTION VALUE="D. sechellia">D. sechellia</OPTION>
                         <OPTION VALUE="D. yakuba">D. yakuba</OPTION>
                         <OPTION VALUE="D. erecta">D. erecta</OPTION>
                         <OPTION VALUE="D. ananassae">D. ananassae</OPTION>
                         <OPTION VALUE="D. pseudoobscura">D. pseudoobscura</OPTION>
                         <OPTION VALUE="D. persimilis">D. persimilis</OPTION>
                         <OPTION VALUE="D. virilis">D. virilis</OPTION>
                         <OPTION VALUE="D. mojavensis">D. mojavensis</OPTION>
                         <OPTION VALUE="D. grimshawi">D. grimshawi</OPTION>

                         <OPTION VALUE="A. gambiae">A. gambiae</OPTION>
                         <OPTION VALUE="A. mellifera">A. mellifera</OPTION>
                         <OPTION VALUE="S. cerevisiae">S. cerevisiae</OPTION>

                         </SELECT>

            [NCBI_BLAST]
            confirm   = 1
            url       = http://www.ncbi.nlm.nih.gov/blast/Blast.cgi
            seq_label = QUERY
            PAGE      = Nucleotides
            PROGRAM   = blastn
            DATABASE  = nr
            CLIENT    = web
            CMD       = put

	    [ZFIN_BLAST]
            confirm   = 0
            url       = /action/blast/blast
	    seq_label = querySequence



category tables = 'ArrayExpts' 'strain-A strain-B strain-C' 'temperature anaerobic aerobic'

########################
# Default glyph settings
########################


[TRACK DEFAULTS]
glyph         = generic
height        = 8
bgcolor       = lightgrey
fgcolor       = black
font2color    = blue
label density = 25
bump density  = 100
# where to link to when user clicks in detailed view
link          = AUTO

################## TRACK CONFIGURATION ####################
# the remainder of the sections configure individual tracks
###########################################################

[genes]
feature      = gene:ZFIN pseudogene:ZFIN
glyph	     = generic
stranded     = 1
description  = 0
bgcolor      = teal
fgcolor      = teal
link         = sub { 
                my $feat = shift;
                my @alias = $feat->attributes('gene_id');
                my $val = pop @alias;
                my $url = "/cgi-bin/webdriver?MIval=aa-markerview.apg&OID=$val";
                return $url; 
                }
key          = ZFIN Gene
#citation      = The ZFIN gene track is a computed combination built from Ensembl and Vega transcript tracks.  A gene's extent is determined by the most 5' and 3' extents of a set of transcripts encoded by the gene.  The set includes transcripts in ZFIN which are manually annotated by the Havana group at the Sanger Institute, in collaboration with ZFIN.  Where there is a one-to-one correspondence between a ZFIN gene and an Ensembl gene, the corresponding Ensembl transcripts will be included. The ZFIN gene track links to ZFIN gene pages.
citation       = The ZFIN gene track is a computed combination built from Ensembl and Vega transcript tracks. A gene's extent is determined by the most 5' and 3' extents of its transcripts. The set includes transcripts in ZFIN which are manually annotated by the Havana group at the Sanger Institute. Where there is a one-to-one correspondence between a ZFIN gene and an Ensembl gene, the transcripts of the Ensembl gene are included. The ZFIN gene track links to ZFIN gene pages.


[phenotype]
feature      = gene:ZFIN_Phenotype pseudogene:ZFIN_Phenotype
glyph        = generic
stranded     = 1
description  = 0
bgcolor      = pink
fgcolor      = pink
link         = sub {
                my $feat = shift;
                my @alias = $feat->attributes('gene_id');
                my $val = pop @alias;
                my $url = "/cgi-bin/webdriver?MIval=aa-pheno_summary.apg&OID=$val";
                return $url;
                }
key          = ZFIN Genes with Phenotype
citation     = ZFIN genes that have phenotype data associated with them are displayed in this track.

[expression]
feature      = gene:ZFIN_Expression pseudogene:ZFIN_Expression
glyph        = generic
stranded     = 1
description  = 0
bgcolor      = cyan
fgcolor      = cyan
link         = sub {
                my $feat = shift;
		   my @alias = $feat->attributes('gene_id');
                my $val = pop @alias;
                my $url = "/cgi-bin/webdriver?MIval=aa-xpatselect.apg&query_results=true&xpatsel_geneZdbId=$val";
                return $url;
                }
key          = ZFIN Genes with Expression
citation     = ZFIN genes that have expression data associated with them are displayed in this track.

[antibody]
feature      = gene:ZFIN_Antibody pseudogene:ZFIN_Antibody
glyph        = generic
stranded     = 1
description  = 0
#lightsalmon
bgcolor      = #ffa07a
fgcolor      = #ffa07a
link         = sub {
                my $feat = shift;
                my $val = $feat->name;              
                my $url = "/action/antibody/antibody-do-search?antibodyCriteria.antibodyNameFilterType=contains&antibodyCriteria.name=$val";
                return $url;
               }
key          = ZFIN Genes with Antibody Data
citation     = ZFIN genes that have antibody records associated with them are displayed in this track.

#[ensemblgenes]
#feature      = gene:protein_coding
#glyph	     = processed_transcript
##label_transcripts = 1
##draw_translation = 1
##glyph	     = gene
#stranded     = 1
#description  = 0
#bgcolor      = red
#fgcolor      = red
#link         = sub { 
#                my $feat = shift;
#                my @alias = $feat->attributes('load_id');
#                my $val = pop @alias;
##                my $url = "/cgi-bin/webdriver?MIval=aa-markerview.apg&OID=$val";
#                my $url = "http://www.ensembl.org/Danio_rerio/geneview?gene=$val";
#                return $url; 
#                }
#key          = Ensembl Gene
##citation     = The extent of the zebrafish gene as defined by the 5'-most and 3'-most extents of the transcripts encoded by the gene.

[Ensembl_mRNA]
feature      = mRNA:Ensembl_IG_D_gene mRNA:Ensembl_IG_M_gene mRNA:Ensembl_IG_V_gene
               transcript:Ensembl_processed_transcript
               mRNA:Ensembl_protein_coding
               transcript:Ensembl_pseudogene
               mRNA:vega transcript:vega
glyph        = processed_transcript
connector    = solid
stranded     = 0
description  = 0
sort         = name
utr_color    = white
bgcolor      = red
fgcolor	     = red
key          = Ensembl Transcript
citation     = All transcripts reported by Ensembl.
link         = sub { 
                my $feat = shift;
                my @load_id = $feat->attributes('load_id');
                my $val = pop @load_id;
                my $url = "http://www.ensembl.org/Danio_rerio/Transcript/Summary?db=core;t=$val";
                return $url; 
                }

[mRNA]
feature      = mRNA:vega transcript:vega
glyph        = processed_transcript
connector    = solid
stranded     = 0
sort         = name
utr_color    = white
bgcolor	     = cornflowerblue
fgcolor	     = cornflowerblue
key          = Transcript
citation     = Zebrafish transcripts manually annotated by the <a href="http://www.sanger.ac.uk/research/projects/vertebrategenome/">Havana group</a> at the <a href="http://www.sanger.ac.uk/">Sanger Institute</a>, in collaboration with ZFIN. The transcript track links to ZFIN transcript pages.
link         = sub { 
                my $feat = shift;
                my @alias = $feat->attributes('zdb_id');
                my $val = pop @alias;                
                my $url = "/action/marker/transcript-view?zdbID=$val";
                return $url; 
                }


#[mRNA]
#feature      = mRNA:vega transcript:vega
#glyph        = processed_transcript
#connector    = solid
#stranded     = 1
#label_transcripts = 1
#draw_dna     = 1
##translation  = 1frame
#description  = 0
#utr_color    = white
#bgcolor      = cornflowerblue 
#fgcolor	     = cornflowerblue
#key          = Vega Transcript
##citation     = Zebrafish transcripts annotated by the HAVANA group at the Sanger Institute, in collaboration with ZFIN. Transcripts at ZFIN are based on VEGA transcripts. The VEGA transcript tracks link to ZFIN transcript pages.
#link         = sub { 
#                my $feat = shift;
#                my @load_id = $feat->attributes('load_id');
#                my $val = pop @load_id;
#                my $url = "http://www.ensembl.org/Danio_rerio/Transcript/Summary?db=core;t=$val";
#                return $url; 
#                }


#[miRNAGene]
#feature      = gene:miRNA
#glyph	     = processed_transcript
##label_transcripts = 1
##draw_translation = 1
##glyph	     = gene
#stranded     = 1
#description  = 0
#bgcolor      = teal
#fgcolor      = teal
#link         = sub { 
#                my $feat = shift;
#                my @alias = $feat->attributes('load_id');
#                my $val = pop @alias;
#                my $url = "http://www.ensembl.org/Danio_rerio/geneview?gene=$val";
#                return $url; 
#                }
#key          = Ensembl miRNA Gene
##citation     = The extent of the zebrafish gene as defined by the 5'-most and 3'-most extents of the transcripts encoded by the gene.

#[miRNATranscript]
#feature      = transcript:miRNA
#glyph        = processed_transcript
#connector    = solid
#stranded     = 1
#label_transcripts = 1
#draw_dna     = 1
##translation  = 1frame
#description  = 0
#utr_color    = white
#bgcolor      = cornflowerblue 
#fgcolor	     = cornflowerblue
#key          = Ensembl miRNA Transcript
##citation     = Zebrafish transcripts annotated by the HAVANA group at the Sanger Institute, in collaboration with ZFIN. Transcripts at ZFIN are based on VEGA transcripts. The VEGA transcript tracks link to ZFIN transcript pages.
#link         = sub { 
#                my $feat = shift;
#                my @load_id = $feat->attributes('load_id');
#                my $val = pop @load_id;
#                my $url = "http://www.ensembl.org/Danio_rerio/Transcript/Summary?db=core;t=$val";
#                return $url; 
#                }

[morpholino]
feature      = morpholino_oligo
glyph        = generic
description  = 1
#mediumseagreen
bgcolor      = #3CB371
fgcolor      = #3CB371

key          = Morpholino
citation     = ZFIN's morpholinos mapped to the Zv9 assembly with the Bowtie short read aligner. 
link         = sub {
                my $feat = shift;
                my @alias = $feat->attributes('zdb_id');
                my $val = pop @alias;
                my $url = "/cgi-bin/webdriver?MIval=aa-markerview.apg&OID=$val";

                return $url;
                }

[insertion]
feature      = Transgenic_insertion
glyph        = triangle
description  = 1
#a "triadic" color of mediumseagreen, via color-hex.com
bgcolor      = #703bb3
fgcolor      = #703bb3

key          = Transgenic Insertion
citation     = Transgenic insertion flanking sequence that has been mapped  to Zv9 assembly with the Bowtie short read aligner.
link         = sub {
                my $feat = shift;
                my @alias = $feat->attributes('load_id');
                my $val = pop @alias;
                my $url = "/action/feature/feature-detail?zdbID=$val";

                return $url;
                }



[clone]

feature      = clone:Ensembl_Finished_trimmed contig:Ensembl_Finished_trimmed
glyph        = generic
draw_dna     = 1
#connector    = solid
stranded     = 0
#translation  = 1frame  
description  = 0
#thin_utr      = 0
#utr_color    = white
height	      = 10
bgcolor      = cornflowerblue
fgcolor      = cornflowerblue
key          = Assembly
citation     = The "golden path" clones and contigs as reported by Ensembl.
link         = sub {
                my $feat = shift;
                my @zdb_id = $feat->attributes('zdb_id');
                my $val = pop @zdb_id;
                my $url;
                if ($val) {
                  $url = "/action/marker/view/$val";
                } else {
                  $val = $feat->name;
                  $url = "http://www.ensembl.org/Danio_rerio/Search/Details?species=Danio_rerio;idx=Sequence;end=1;q=$val"
                }
                return $url;
                }

[fullclone]
feature      = clone:Ensembl_Finished contig:Ensembl_Finished
glyph        = generic
#connector    = solid                                                                                                                                                 
stranded     = 0
#translation  = 1frame                                                                                                                                                
description  = 0
#thin_utr      = 0                                                                                                                                                    
#utr_color    = white                                                                                                                                                 
height        = 10
bgcolor      = white
fgcolor      = cornflowerblue
key          = Complete Assembly Clones
citation     = Clones from the Assembly with 3' and 5' overlapping regions restored.
link         = sub {
                my $feat = shift;
                my @zdb_id = $feat->attributes('zdb_id');
                my $val = pop @zdb_id;
                my $url;
                if ($val) {
                  $url = "/cgi-bin/webdriver?MIval=aa-markerview.apg&OID=$val";
                } else {
                  $val = $feat->name;
                  $url = "http://www.ensembl.org/Danio_rerio/Search/Details?species=Danio_rerio;idx=Sequence;end=1;q=$val"
                }
               return $url;
                }





#[mRNA]
#feature       = mRNA
#bgcolor       = lightgray
#fgcolor       = black
#stranded      = 1
#description   = 1
#key           = mRNA

#[Genes]
#feature      = gene
#bgcolor      = yellow
#description  = 1
#key          = Named gene

#[CDS]
#feature      = CDS
#glyph	     = cds
#frame0f      = cadetblue
#frame1f      = blue
#frame2f      = darkblue
#frame0r      = darkred
#frame1r      = red
#frame2r      = crimson
#description  = 1
#label        = CDS frame
#key          = CDS
#citation     = This track shows CDS reading frames.

#[exon]
#feature       = exon
#fgcolor       = orange
#glyph         = generic
#description   = 1
#key           = exon


