<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.jboss.org/dtd/hibernate/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="org.zfin.fish">

    <class name="FishAnnotation" table="fish_annotation_search">

        <id name="ID">
            <column name="fas_pk_id" not-null="true"/>
            <generator class="identity"/>
        </id>

        <property name="name" column="fas_geno_long_name"/>
        <property name="featureGroupName" column="fas_feature_group"/>
        <property name="genotypeExperimentIds" column="fas_genox_group"/>
        <property name="genotypeID" column="fas_genotype_group"/>
        <property name="morpholinoGroupName" column="fas_str_group"/>

        <set name="genotypeExperimentFishAnnotations" lazy="true">
            <key column="genoxfas_fas_id"/>
            <one-to-many class="org.zfin.fish.GenotypeExperimentFishAnnotation"/>
        </set>

    </class>

    <class name="org.zfin.fish.WarehouseSummary" table="warehouse_run_tracking">

        <id name="ID">
            <column name="wrt_pk_id" not-null="true"/>
            <generator class="identity"/>
        </id>

        <property name="martName" column="wrt_mart_name"/>
        <property name="releaseDate" column="wrt_last_loaded_date"/>
    </class>

    <class name="FeatureGene" mutable="false" table="gene_feature_result_View">
        <cache usage="read-only"/>
        <id name="ID">
            <column name="gfrv_pk_id" not-null="true"/>
            <generator class="identity"/>
        </id>

        <many-to-one name="fishAnnotation" column="gfrv_fas_id"/>
        <property name="typeDisplay" column="gfrv_affector_type_display"/>
        <component name="gene">
            <property name="ID" column="gfrv_gene_zdb_id"/>
            <property name="name" column="gfrv_gene_abbrev"/>
            <property name="nameOrder" column="gfrv_gene_abbrev_order"/>
        </component>
        <component name="feature">
            <property name="ID" column="gfrv_affector_id"/>
            <property name="name" column="gfrv_affector_abbrev"/>
            <property name="nameOrder" column="gfrv_affector_abbrev_order"/>
        </component>
        <component name="construct">
            <property name="ID" column="gfrv_construct_zdb_id"/>
            <property name="name" column="gfrv_construct_name"/>
            <property name="nameOrder" column="gfrv_construct_abbrev_order"/>
        </component>
    </class>

    <class name="org.zfin.fish.GenotypeExperimentFishAnnotation" table="genox_fish_annotation_search">
        <id name="id" type="long">
            <column name="genoxfas_pk_id" not-null="true"/>
            <generator class="increment"/>
        </id>
        <many-to-one name="genotypeExperiment" column="genoxfas_genox_zdb_id" class="org.zfin.mutant.GenotypeExperiment"/>
        <many-to-one name="fishAnnotation" column="genoxfas_fas_id" class="org.zfin.fish.FishAnnotation"/>
    </class>

</hibernate-mapping>
