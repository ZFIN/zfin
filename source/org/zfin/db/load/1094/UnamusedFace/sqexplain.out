
QUERY: (OPTIMIZATION TIMESTAMP: 02-05-2018 14:34:14)
------
insert into expression_search_anatomy_generated_temp (esag_efs_id, esag_term_name, esag_is_direct)
SELECT
  'xpatex-' || efs1.efs_pk_id             AS esag_efs_id,
  t.term_name                             AS esag_term_name,
  atc.alltermcon_min_contain_distance = 0 AS esag_is_direct
FROM
  expression_experiment2 xpatex1,
  expression_figure_stage efs1,
  fish_experiment genox1,
  fish fish1,
  expression_experiment2 xpatex2,
  expression_figure_stage efs2,
  fish_experiment genox2,
  fish fish2,
  expression_result2 er,
  all_term_contains atc,
  term t
WHERE xpatex1.xpatex_zdb_id = efs1.efs_xpatex_zdb_id    -- expand first expression experiment
  AND xpatex1.xpatex_genox_zdb_id = genox1.genox_zdb_id
  AND genox1.genox_fish_zdb_id = fish1.fish_zdb_id
  AND xpatex2.xpatex_zdb_id = efs2.efs_xpatex_zdb_id    -- expand second expression experiment
  AND xpatex2.xpatex_genox_zdb_id = genox2.genox_zdb_id
  AND genox2.genox_fish_zdb_id = fish2.fish_zdb_id
  AND xpatex2.xpatex_gene_zdb_id IS NOT NULL                  -- experiments must be about a gene and the same gene
  AND xpatex2.xpatex_gene_zdb_id = xpatex1.xpatex_gene_zdb_id
  AND xpatex2.xpatex_genox_zdb_id = xpatex1.xpatex_genox_zdb_id
  AND efs2.efs_pk_id = er.xpatres_efs_id                -- get the anatomy term results of the second experiment
  AND (er.xpatres_superterm_zdb_id = atc.alltermcon_contained_zdb_id OR
       er.xpatres_subterm_zdb_id = atc.alltermcon_contained_zdb_id)
  AND atc.alltermcon_container_zdb_id = t.term_zdb_id
  AND er.xpatres_expression_found = 't'

Estimated Cost: 151326
Estimated # of Rows Returned: 14103



  1) staylor.genox1: SEQUENTIAL SCAN  (Serial, fragments: ALL)

  2) staylor.xpatex2: INDEX PATH

        Filters: staylor.xpatex2.xpatex_gene_zdb_id IS NOT NULL 

    (1) Index Name: informix.xpatex_genox_zdb_id_foreign_key_index
        Index Keys: xpatex_genox_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.xpatex2.xpatex_genox_zdb_id = staylor.genox1.genox_zdb_id 
NESTED LOOP JOIN

  3) staylor.xpatex1: INDEX PATH

        Filters: (staylor.xpatex2.xpatex_gene_zdb_id = staylor.xpatex1.xpatex_gene_zdb_id AND staylor.xpatex1.xpatex_gene_zdb_id IS NOT NULL ) 

    (1) Index Name: informix.xpatex_genox_zdb_id_foreign_key_index
        Index Keys: xpatex_genox_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.xpatex1.xpatex_genox_zdb_id = staylor.genox1.genox_zdb_id 
NESTED LOOP JOIN

  4) staylor.efs2: INDEX PATH

    (1) Index Name: informix.expression_figure_stage_alternate_key_index
        Index Keys: efs_xpatex_zdb_id efs_fig_zdb_id efs_start_stg_zdb_id efs_end_stg_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.xpatex2.xpatex_zdb_id = staylor.efs2.efs_xpatex_zdb_id 
NESTED LOOP JOIN

  5) staylor.er: INDEX PATH

        Filters: informix.equal(staylor.er.xpatres_expression_found ,'t' )

    (1) Index Name: informix.xpatres_efs_foreign_key_index
        Index Keys: xpatres_efs_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.efs2.efs_pk_id = staylor.er.xpatres_efs_id 
NESTED LOOP JOIN

  6) staylor.genox2: INDEX PATH

    (1) Index Name: informix.genotype_experiment_primary_key_index
        Index Keys: genox_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.genox2.genox_zdb_id = staylor.genox1.genox_zdb_id 
NESTED LOOP JOIN

  7) staylor.fish1: INDEX PATH

    (1) Index Name: informix.fish_zdb_id_pk_index
        Index Keys: fish_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.genox1.genox_fish_zdb_id = staylor.fish1.fish_zdb_id 
NESTED LOOP JOIN

  8) staylor.fish2: INDEX PATH

    (1) Index Name: informix.fish_zdb_id_pk_index
        Index Keys: fish_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.genox2.genox_fish_zdb_id = staylor.fish2.fish_zdb_id 
NESTED LOOP JOIN

  9) staylor.atc: INDEX PATH

    (1) Index Name: informix.alltermcon_contained_zdb_id_index
        Index Keys: alltermcon_contained_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.er.xpatres_superterm_zdb_id = staylor.atc.alltermcon_contained_zdb_id 

    (2) Index Name: informix.alltermcon_contained_zdb_id_index
        Index Keys: alltermcon_contained_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.er.xpatres_subterm_zdb_id = staylor.atc.alltermcon_contained_zdb_id 
NESTED LOOP JOIN

 10) staylor.t: INDEX PATH

    (1) Index Name: informix.term_primary_key_index
        Index Keys: term_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.atc.alltermcon_container_zdb_id = staylor.t.term_zdb_id 
NESTED LOOP JOIN

 11) staylor.efs1: INDEX PATH

    (1) Index Name: informix.expression_figure_stage_alternate_key_index
        Index Keys: efs_xpatex_zdb_id efs_fig_zdb_id efs_start_stg_zdb_id efs_end_stg_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.xpatex1.xpatex_zdb_id = staylor.efs1.efs_xpatex_zdb_id 
NESTED LOOP JOIN

UDRs in query:
--------------
    UDR id  :	-113
    UDR name:	equal
UDRs in query:
--------------
    UDR id  :	-113
    UDR name:	equal

QUERY: (OPTIMIZATION TIMESTAMP: 02-05-2018 14:34:14)
------
insert into expression_search_anatomy_generated_temp (esag_efs_id, esag_term_name, esag_is_direct)
SELECT
  'xpatex-' || efs1.efs_pk_id             AS esag_efs_id,
  t.term_name                             AS esag_term_name,
  atc.alltermcon_min_contain_distance = 0 AS esag_is_direct
FROM
  expression_experiment2 xpatex1,
  expression_figure_stage efs1,
  fish_experiment genox1,
  fish fish1,
  expression_experiment2 xpatex2,
  expression_figure_stage efs2,
  fish_experiment genox2,
  fish fish2,
  expression_result2 er,
  all_term_contains atc,
  term t
WHERE xpatex1.xpatex_zdb_id = efs1.efs_xpatex_zdb_id    -- expand first expression experiment
  AND xpatex1.xpatex_genox_zdb_id = genox1.genox_zdb_id
  AND genox1.genox_fish_zdb_id = fish1.fish_zdb_id
  AND xpatex2.xpatex_zdb_id = efs2.efs_xpatex_zdb_id    -- expand second expression experiment
  AND xpatex2.xpatex_genox_zdb_id = genox2.genox_zdb_id
  AND genox2.genox_fish_zdb_id = fish2.fish_zdb_id
  AND xpatex2.xpatex_gene_zdb_id IS NOT NULL                  -- experiments must be about a gene and the same gene
  AND xpatex2.xpatex_gene_zdb_id = xpatex1.xpatex_gene_zdb_id
  AND xpatex2.xpatex_genox_zdb_id = xpatex1.xpatex_genox_zdb_id
  AND efs2.efs_pk_id = er.xpatres_efs_id                -- get the anatomy term results of the second experiment
  AND (er.xpatres_superterm_zdb_id = atc.alltermcon_contained_zdb_id OR
       er.xpatres_subterm_zdb_id = atc.alltermcon_contained_zdb_id)
  AND atc.alltermcon_container_zdb_id = t.term_zdb_id
  AND er.xpatres_expression_found = 't'
  AND genox1.genox_is_std_or_generic_control = 't' AND             -- they're both some kind of wildtype experiment
        genox2.genox_is_std_or_generic_control = 't' AND
        fish1.fish_is_wildtype = 't' AND
        fish2.fish_is_wildtype = 't' AND
        fish1.fish_functional_affected_gene_count = 0 AND
        fish2.fish_functional_affected_gene_count = 0

Estimated Cost: 4232
Estimated # of Rows Returned: 2



  1) staylor.fish2: SEQUENTIAL SCAN  (Serial, fragments: ALL)

        Filters: (informix.equal(staylor.fish2.fish_is_wildtype ,'t' )AND staylor.fish2.fish_functional_affected_gene_count = 0 ) 

  2) staylor.genox2: INDEX PATH

        Filters: informix.equal(staylor.genox2.genox_is_std_or_generic_control ,'t' )

    (1) Index Name: informix.fish_experiment_alternate_key_index
        Index Keys: genox_fish_zdb_id genox_exp_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.genox2.genox_fish_zdb_id = staylor.fish2.fish_zdb_id 
NESTED LOOP JOIN

  3) staylor.genox1: INDEX PATH

        Filters: informix.equal(staylor.genox1.genox_is_std_or_generic_control ,'t' )

    (1) Index Name: informix.genotype_experiment_primary_key_index
        Index Keys: genox_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.genox2.genox_zdb_id = staylor.genox1.genox_zdb_id 
NESTED LOOP JOIN

  4) staylor.fish1: INDEX PATH

        Filters: (informix.equal(staylor.fish1.fish_is_wildtype ,'t' )AND staylor.fish1.fish_functional_affected_gene_count = 0 ) 

    (1) Index Name: informix.fish_zdb_id_pk_index
        Index Keys: fish_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.genox1.genox_fish_zdb_id = staylor.fish1.fish_zdb_id 
NESTED LOOP JOIN

  5) staylor.xpatex2: INDEX PATH

        Filters: staylor.xpatex2.xpatex_gene_zdb_id IS NOT NULL 

    (1) Index Name: informix.xpatex_genox_zdb_id_foreign_key_index
        Index Keys: xpatex_genox_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.xpatex2.xpatex_genox_zdb_id = staylor.genox1.genox_zdb_id 
NESTED LOOP JOIN

  6) staylor.xpatex1: INDEX PATH

        Filters: (staylor.xpatex2.xpatex_gene_zdb_id = staylor.xpatex1.xpatex_gene_zdb_id AND staylor.xpatex1.xpatex_gene_zdb_id IS NOT NULL ) 

    (1) Index Name: informix.xpatex_genox_zdb_id_foreign_key_index
        Index Keys: xpatex_genox_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.xpatex1.xpatex_genox_zdb_id = staylor.genox1.genox_zdb_id 
NESTED LOOP JOIN

  7) staylor.efs2: INDEX PATH

    (1) Index Name: informix.expression_figure_stage_alternate_key_index
        Index Keys: efs_xpatex_zdb_id efs_fig_zdb_id efs_start_stg_zdb_id efs_end_stg_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.xpatex2.xpatex_zdb_id = staylor.efs2.efs_xpatex_zdb_id 
NESTED LOOP JOIN

  8) staylor.er: INDEX PATH

        Filters: informix.equal(staylor.er.xpatres_expression_found ,'t' )

    (1) Index Name: informix. 370_661
        Index Keys: xpatres_efs_id xpatres_superterm_zdb_id xpatres_subterm_zdb_id xpatres_expression_found   (Serial, fragments: ALL)
        Lower Index Filter: staylor.efs2.efs_pk_id = staylor.er.xpatres_efs_id 
NESTED LOOP JOIN

  9) staylor.atc: INDEX PATH

    (1) Index Name: informix.alltermcon_contained_zdb_id_index
        Index Keys: alltermcon_contained_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.er.xpatres_superterm_zdb_id = staylor.atc.alltermcon_contained_zdb_id 

    (2) Index Name: informix.alltermcon_contained_zdb_id_index
        Index Keys: alltermcon_contained_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.er.xpatres_subterm_zdb_id = staylor.atc.alltermcon_contained_zdb_id 
NESTED LOOP JOIN

 10) staylor.t: INDEX PATH

    (1) Index Name: informix.term_primary_key_index
        Index Keys: term_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.atc.alltermcon_container_zdb_id = staylor.t.term_zdb_id 
NESTED LOOP JOIN

 11) staylor.efs1: INDEX PATH

    (1) Index Name: informix.expression_figure_stage_alternate_key_index
        Index Keys: efs_xpatex_zdb_id efs_fig_zdb_id efs_start_stg_zdb_id efs_end_stg_zdb_id   (Serial, fragments: ALL)
        Lower Index Filter: staylor.xpatex1.xpatex_zdb_id = staylor.efs1.efs_xpatex_zdb_id 
NESTED LOOP JOIN

UDRs in query:
--------------
    UDR id  :	-113
    UDR name:	equal
    UDR id  :	-113
    UDR name:	equal
    UDR id  :	-113
    UDR name:	equal
    UDR id  :	-113
    UDR name:	equal
    UDR id  :	-113
    UDR name:	equal
    UDR id  :	-721
    UDR name:	compare
UDRs in query:
--------------
    UDR id  :	-113
    UDR name:	equal
    UDR id  :	-113
    UDR name:	equal
    UDR id  :	-113
    UDR name:	equal
    UDR id  :	-113
    UDR name:	equal
    UDR id  :	-113
    UDR name:	equal
    UDR id  :	-721
    UDR name:	compare
