<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.jboss.org/dtd/hibernate/hibernate-mapping-3.0.dtd">

<!-- Alwyas include the full package in each class.name attribute. This allows refactoring to identify
     the class and include them. Otherwise a refactoring of a class reference here is not recognized and
     could potentially break the code (e.g. moving a class into a different package. -->
<hibernate-mapping package="org.zfin.orthology">

    <class name="org.zfin.orthology.Ortholog" table="ortholog">
        <id name="zdbID" type="string">
            <column name="ortho_zdb_id" not-null="true"/>
            <generator class="org.zfin.database.ZdbIdGenerator">
                <param name="type">ORTHO</param>
                <param name="insertActiveData">true</param>
            </generator>
        </id>

        <property name="name" column="ortho_other_species_name"/>
        <property name="symbol" column="ortho_other_species_symbol"/>
        <property name="chromosome" column="ortho_other_species_chromosome"/>
        <property name="position" column="ortho_other_species_position"/>
        <property name="obsolete" column="ortho_other_species_ncbi_gene_is_obsolete"/>

        <many-to-one name="zebrafishGene" column="ortho_zebrafish_gene_zdb_id" class="org.zfin.marker.Marker"
                     not-null="true"/>
        <many-to-one name="ncbiOtherSpeciesGene" column="ortho_other_species_ncbi_gene_id" not-null="true"/>

        <set name="externalReferenceList" table="ortholog_external_reference" sort="org.zfin.orthology.OrthologAccessionSorting">
            <key column="oef_ortho_zdb_id"/>
            <composite-element class="org.zfin.orthology.OrthologExternalReference">
                <parent name="ortholog"/>
                <many-to-one name="referenceDatabase" column="oef_fdbcont_zdb_id"/>
                <property name="accessionNumber" column="oef_accession_number"/>
            </composite-element>
        </set>

        <set name="evidenceSet" table="ortholog_evidence">
            <key column="oev_ortho_zdb_id"/>
            <composite-element class="org.zfin.orthology.OrthologEvidence">
                <parent name="ortholog"/>
                <many-to-one name="publication" column="oev_pub_zdb_id"/>
                <many-to-one name="evidenceCode" column="oev_evidence_code"/>
            </composite-element>
        </set>

    </class>

    <class name="org.zfin.orthology.NcbiOtherSpeciesGene" table="ncbi_ortholog" mutable="false">
        <id name="ID" type="string">
            <column name="noi_ncbi_gene_id" not-null="true"/>
        </id>
        <property name="name" column="noi_name"/>
        <property name="abbreviation" column="noi_symbol"/>
        <property name="chromosome" column="noi_chromosome" type="string"/>
        <property name="position" column="noi_position" type="string"/>

        <many-to-one name="organism" column="noi_taxid" class="org.zfin.Species"/>

    </class>

    <class name="org.zfin.orthology.NcbiOrthoExternalReference" table="ncbi_ortholog_external_reference" mutable="false">
        <id name="ID" type="long">
            <column name="noer_pk_id" not-null="true"/>
            <generator class="identity"/>
        </id>
        <many-to-one name="referenceDatabase" column="noer_fdbcont_zdb_id"/>
        <many-to-one name="ncbiOtherSpeciesGene" column="noer_other_species_ncbi_gene_id"/>
        <property name="accessionNumber" column="noer_other_species_accession_number"/>
    </class>


    <class name="org.zfin.orthology.EvidenceCode" table="ortholog_evidence_code">

        <id name='code' type="string">
            <column name="oevcode_code" not-null="true"/>
            <generator class="native"/>
        </id>
        <property name="order" column="oevcode_order" type="java.lang.Integer" not-null="true"/>
        <property name="name" column="oevcode_name" not-null="true"/>

    </class>

    <class name="org.zfin.orthology.OrthoEvidenceDisplay" table="orthologue_evidence_display">
        <id name="zdbID" type="string">
            <column name="oevdisp_zdb_id" not-null="true"/>
            <generator class="org.zfin.database.ZdbIdGenerator">
                <param name="type">OEVDISP</param>
                <param name="insertActiveData">true</param>
            </generator>
        </id>
        <property name="organismList" column="oevdisp_organism_list"/>
        <many-to-one name="gene" column="oevdisp_gene_zdb_id" class="org.zfin.marker.Marker" not-null="true"/>
        <many-to-one name="evidenceCode" column="oevdisp_evidence_code" not-null="true"/>
    </class>


    <class name="org.zfin.orthology.repository.AccessionHelperDBLink" table="db_link">

        <id name="zdbID" type="string">
            <column name="dblink_zdb_id" not-null="true"/>
            <generator class="native"/>
        </id>

        <property name="orthoID">
            <column name="dblink_linked_recid"/>
        </property>

        <property name="accessionNum">
            <column name="dblink_acc_num_display"/>
        </property>

        <property name="accessionHyperLinkNum">
            <column name="dblink_acc_num"/>
        </property>

        <!--<one-to-one name="fdbContHelper" class="org.zfin.orthology.repository.AccessionHelperFDBCont" foreign-key="dblink_fdbcont_zdb_id" />-->

        <many-to-one name="fdbContHelper" column="dblink_fdbcont_zdb_id" unique="true" not-null="true"/>

    </class>

    <class name="org.zfin.orthology.repository.AccessionHelperFDBCont" table="foreign_db_contains">

        <id name="fdbcontID" type="string">
            <column name="fdbcont_zdb_id" not-null="true"/>
            <generator class="native"/>
        </id>

        <property name="species">
            <column name="fdbcont_organism_common_name"/>
        </property>

        <!--<one-to-one name="FDBhelper" class="org.zfin.orthology.repository.AccessionHelperFDB" foreign-key="fdbcont_fdb_db_id" />-->

        <many-to-one name="FDBhelper" column="fdbcont_fdb_db_id" unique="true" not-null="true"/>
    </class>

    <class name="org.zfin.orthology.repository.AccessionHelperFDB" table="foreign_db">

        <id name="id">
            <column name="fdb_db_pk_id" not-null="true"/>
            <generator class="native"/>
        </id>

        <property name="significance" column="fdb_db_significance"/>
        <property name="hyperLinkQuery" column="fdb_db_query"/>
        <property name="FDBname" column="fdb_db_name"/>
    </class>


</hibernate-mapping>
