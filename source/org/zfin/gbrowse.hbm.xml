<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.jboss.org/dtd/hibernate/hibernate-mapping-3.0.dtd">


<hibernate-mapping package="org.zfin.gbrowse">

    <class name="org.zfin.gbrowse.GBrowseFeature" table="feature">
        <id name="id">
            <column name="id" not-null="true"/>
        </id>

        <property name="start" type="java.lang.Long">
            <column name="start"/>
        </property>

        <property name="end" type="java.lang.Long">
            <column name="end"/>
        </property>

        <many-to-one name="type" column="typeid" class="org.zfin.gbrowse.GBrowseType" not-null="true"/>
        <many-to-one name="contig" column="seqid" class="org.zfin.gbrowse.GBrowseContig"/>

        <set name="synonyms">
            <key column="id"/>
            <one-to-many class="org.zfin.gbrowse.GBrowseName"/>
        </set>

        <set name="attributes" lazy="true">
            <key column="id"/>
            <one-to-many class="org.zfin.gbrowse.GBrowseAttribute"/>
        </set>

    </class>

    <class name="org.zfin.gbrowse.GBrowseName" table="name">

        <composite-id>
            <key-property name="featureId">
                <column name="id"/>
            </key-property>
            <key-property name="name">
                <column name="name"/>
            </key-property>
        </composite-id>

        <property name="displayName">
            <column name="display_name"/>
        </property>

        <many-to-one name="feature" column="id" class="org.zfin.gbrowse.GBrowseFeature"
                     insert="false" update="false"/>

    </class>

    <class name="org.zfin.gbrowse.GBrowseAttributeType" table="attributelist">
        <id name="id">
            <column name="id" not-null="true"/>
        </id>
        <property name="tag">
            <column name="tag"/>
        </property>
    </class>

    <class name="org.zfin.gbrowse.GBrowseAttribute" table="attribute">
        <composite-id>
            <key-property name="attributeTypeId">
                <column name="attribute_id"/>
            </key-property>
            <key-property name="featureId">
                <column name="id"/>
            </key-property>
        </composite-id>
        <property name="value">
            <column name="attribute_value"/>
        </property>
        <many-to-one name="feature" column="id" class="org.zfin.gbrowse.GBrowseFeature"
                     insert="false" update="false"/>
    </class>

    <class name="org.zfin.gbrowse.GBrowseContig" table="locationlist">
        <id name="id">
            <column name="id" not-null="true"/>
        </id>
        <property name="name">
            <column name="seqname"/>
        </property>
    </class>

    <class name="org.zfin.gbrowse.GBrowseType" table="typelist">
        <id name="id">
            <column name="id" not-null="true"/>
        </id>
        <property name="tag">
            <column name="tag"/>
        </property>
    </class>

</hibernate-mapping>